(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1931],{68577:function(){},42480:function(){},58870:function(e,t,n){"use strict";var r,a,o=n(2265);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.Z=function(e){return o.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),r||(r=o.createElement("defs",null,o.createElement("path",{id:"add_svg__a",d:"M0 0h16v16H0z"}))),o.createElement("g",null,a||(a=o.createElement("mask",{id:"add_svg__b",fill:"#fff"},o.createElement("use",{xlinkHref:"#add_svg__a"}))),o.createElement("g",{mask:"url(#add_svg__b)"},o.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M13.33 6.67A6.66 6.66 0 0 0 6.67 0C2.98 0 0 2.98 0 6.67a6.66 6.66 0 0 0 6.67 6.66c3.68 0 6.66-2.98 6.66-6.66Z",transform:"translate(1.333 1.333)"}),o.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 0v5.33",transform:"translate(8 5.333)"}),o.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 0h5.33",transform:"translate(5.333 8)"}))))}},30217:function(e,t,n){"use strict";var r,a,o,s,i=n(2265);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.Z=function(e){return i.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:30,height:30,fill:"none"},e),r||(r=i.createElement("defs",null,i.createElement("path",{id:"bot_svg__a",d:"M0 0h30v30H0z"}),i.createElement("path",{id:"bot_svg__c",d:"M0 0h20.455v20.455H0z"}))),i.createElement("g",null,a||(a=i.createElement("rect",{fill:"#E7F8FF",width:30,height:30,rx:10})),o||(o=i.createElement("mask",{id:"bot_svg__b",fill:"#fff"},i.createElement("use",{xlinkHref:"#bot_svg__a"}))),i.createElement("g",{mask:"url(#bot_svg__b)"},i.createElement("g",{transform:"translate(4.773 4.773)"},s||(s=i.createElement("mask",{id:"bot_svg__d",fill:"#fff"},i.createElement("use",{xlinkHref:"#bot_svg__c"}))),i.createElement("g",{mask:"url(#bot_svg__d)"},i.createElement("path",{fillRule:"evenodd",style:{fill:"#1f948c"},d:"M19.11 8.37c.17-.52.26-1.06.26-1.61 0-.9-.24-1.79-.71-2.57a5.24 5.24 0 0 0-4.53-2.59c-.37 0-.73.04-1.09.11A5.201 5.201 0 0 0 9.17 0h-.04C6.86 0 4.86 1.44 4.16 3.57A5.11 5.11 0 0 0 .71 6.04C.24 6.83 0 7.72 0 8.63c0 1.27.48 2.51 1.35 3.45-.18.52-.27 1.07-.27 1.61 0 .91.25 1.8.71 2.58 1.13 1.94 3.41 2.94 5.63 2.47a5.18 5.18 0 0 0 3.86 1.71h.05c2.26 0 4.27-1.44 4.97-3.57a5.132 5.132 0 0 0 3.45-2.47c.46-.78.7-1.67.7-2.58 0-1.28-.48-2.51-1.34-3.46ZM8.947 18.158c-.04.03-.08.05-.12.07.7.58 1.57.89 2.48.89h.01c2.14 0 3.88-1.72 3.88-3.83v-4.76c0-.02-.02-.04-.04-.05l-1.74-.99v5.75c0 .23-.13.45-.34.57l-4.13 2.35Zm-.67-1.153 4.17-2.38c.02-.01.03-.03.03-.05v-1.99l-5.04 2.87c-.21.12-.47.12-.68 0l-4.13-2.35c-.04-.02-.09-.06-.12-.07-.04.21-.06.43-.06.65 0 .67.18 1.33.52 1.92v-.01c.7 1.19 1.98 1.92 3.37 1.92.68 0 1.35-.18 1.94-.51ZM3.903 5.168v-.14c-.85.31-1.57.9-2.02 1.68a3.78 3.78 0 0 0-.52 1.91c0 1.37.74 2.64 1.94 3.33l4.17 2.37c.02.01.04.01.06 0l1.75-1-5.04-2.87a.64.64 0 0 1-.34-.57v-4.71Zm13.253 3.337-4.18-2.38c-.02 0-.04 0-.06.01l-1.74.99 5.04 2.87c.21.12.34.34.34.58v4.85c1.52-.56 2.54-1.99 2.54-3.6 0-1.37-.74-2.63-1.94-3.32ZM8.014 5.83c-.02.01-.03.03-.03.05v1.99L13.024 5a.692.692 0 0 1 .68 0l4.13 2.35c.04.02.08.05.12.07.03-.21.05-.43.05-.65 0-2.11-1.74-3.83-3.88-3.83-.68 0-1.35.18-1.94.51l-4.17 2.38Zm1.133-4.492c-2.15 0-3.89 1.72-3.89 3.83v4.76c0 .02.02.03.03.04l1.75 1v-5.75c0-.23.13-.45.34-.57l4.13-2.35c.04-.03.09-.06.12-.07-.7-.58-1.58-.89-2.48-.89ZM7.983 11.51l2.24 1.27 2.25-1.27V8.95l-2.25-1.28-2.24 1.28v2.56Z"}))))))}},82985:function(e,t,n){"use strict";var r,a,o=n(2265);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.Z=function(e){return o.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),o.createElement("g",null,r||(r=o.createElement("mask",{id:"cancel_svg__b",fill:"#fff"},o.createElement("use",{xlinkHref:"#cancel_svg__a"}))),o.createElement("g",{mask:"url(#cancel_svg__b)"},o.createElement("path",{style:{fill:"#333",opacity:1},d:"M13.997 8.003c0-.816-.157-1.596-.471-2.34a5.947 5.947 0 0 0-1.284-1.907 5.938 5.938 0 0 0-1.905-1.285A5.93 5.93 0 0 0 8.003 2c-.816 0-1.596.157-2.34.47a5.943 5.943 0 0 0-1.907 1.286 5.942 5.942 0 0 0-1.285 1.908A5.955 5.955 0 0 0 2 8.004c0 .813.157 1.591.47 2.333a5.938 5.938 0 0 0 1.286 1.905c.553.553 1.19.98 1.908 1.284.743.314 1.523.47 2.34.47.813 0 1.59-.156 2.333-.47a5.944 5.944 0 0 0 1.905-1.284 5.944 5.944 0 0 0 1.284-1.905c.314-.742.47-1.52.47-2.334zm1.333 0c0 .994-.192 1.945-.576 2.853a7.265 7.265 0 0 1-1.57 2.329 7.265 7.265 0 0 1-2.328 1.57 7.253 7.253 0 0 1-2.853.575 7.278 7.278 0 0 1-2.858-.576 7.27 7.27 0 0 1-2.332-1.569 7.26 7.26 0 0 1-1.57-2.329 7.25 7.25 0 0 1-.576-2.853c0-.996.192-1.949.575-2.858a7.264 7.264 0 0 1 1.571-2.332 7.264 7.264 0 0 1 2.332-1.57A7.275 7.275 0 0 1 8.003.666a7.25 7.25 0 0 1 2.853.576 7.26 7.26 0 0 1 2.329 1.57 7.27 7.27 0 0 1 1.57 2.332c.383.91.575 1.862.575 2.858z"}),o.createElement("path",{style:{fill:"#333",opacity:1},d:"m5.471 4.529 6 6a.666.666 0 1 1-.942.942l-6-6a.665.665 0 1 1 .942-.942z"}))),a||(a=o.createElement("defs",null,o.createElement("path",{id:"cancel_svg__a",d:"M0 0h16v16H0z"}))))}},38669:function(e,t,n){"use strict";var r,a,o=n(2265);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.Z=function(e){return o.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),r||(r=o.createElement("defs",null,o.createElement("path",{id:"close_svg__a",d:"M0 0h16v16H0z"}))),o.createElement("g",null,a||(a=o.createElement("mask",{id:"close_svg__b",fill:"#fff"},o.createElement("use",{xlinkHref:"#close_svg__a"}))),o.createElement("g",{mask:"url(#close_svg__b)"},o.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(2.667 2.667)",d:"m0 0 10.67 10.67M0 10.67 10.67 0"}))))}},12402:function(e,t,n){"use strict";var r,a,o=n(2265);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.Z=function(e){return o.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),o.createElement("g",null,r||(r=o.createElement("mask",{id:"confirm_svg__b",fill:"#fff"},o.createElement("use",{xlinkHref:"#confirm_svg__a"}))),o.createElement("g",{mask:"url(#confirm_svg__b)"},o.createElement("path",{style:{fill:"#333",opacity:1},d:"M5.996 12.892a.67.67 0 0 1-.84-.083l-3.96-3.94a.665.665 0 0 1 .339-1.126.665.665 0 0 1 .602.181l3.49 3.472 8.24-8.202a.663.663 0 0 1 .841-.08.664.664 0 0 1 .244.81.661.661 0 0 1-.145.215l-8.71 8.67a.666.666 0 0 1-.1.083z"}))),a||(a=o.createElement("defs",null,o.createElement("path",{id:"confirm_svg__a",d:"M0 0h16v16H0z"}))))}},36177:function(e,t,n){"use strict";var r,a,o=n(2265);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.Z=function(e){return o.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),o.createElement("g",null,r||(r=o.createElement("mask",{id:"drag_svg__b",fill:"#fff"},o.createElement("use",{xlinkHref:"#drag_svg__a"}))),o.createElement("g",{mask:"url(#drag_svg__b)",fillRule:"evenodd"},o.createElement("path",{style:{fill:"#333"},d:"M6.337 3.33c0 .74-.6 1.34-1.34 1.34a1.336 1.336 0 1 1 1.34-1.34zm-1.34 6a1.33 1.33 0 1 1 0-2.66c.74 0 1.34.59 1.34 1.33 0 .74-.6 1.33-1.34 1.33zm0 4.67a1.336 1.336 0 0 1 0-2.67c.74 0 1.34.6 1.34 1.34 0 .73-.6 1.33-1.34 1.33zM12.337 3.33c0 .74-.6 1.34-1.34 1.34a1.336 1.336 0 1 1 1.34-1.34zm-1.34 6a1.33 1.33 0 1 1 0-2.66c.74 0 1.34.59 1.34 1.33 0 .74-.6 1.33-1.34 1.33zm0 4.67a1.336 1.336 0 0 1 0-2.67c.74 0 1.34.6 1.34 1.34 0 .73-.6 1.33-1.34 1.33z"}))),a||(a=o.createElement("defs",null,o.createElement("path",{id:"drag_svg__a",d:"M0 0h16v16H0z"}))))}},56073:function(e,t,n){"use strict";var r,a=n(2265);function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.Z=function(e){return a.createElement("svg",o({width:800,height:800,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r||(r=a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.301 15.577C4.778 14.268 3.691 12.773 3.18 12c.51-.773 1.598-2.268 3.121-3.577C7.874 7.072 9.816 6 12 6c2.184 0 4.126 1.072 5.699 2.423 1.523 1.309 2.61 2.804 3.121 3.577-.51.773-1.598 2.268-3.121 3.577C16.126 16.928 14.184 18 12 18c-2.184 0-4.126-1.072-5.699-2.423ZM12 4C9.148 4 6.757 5.395 4.998 6.906c-1.765 1.517-2.99 3.232-3.534 4.064a1.876 1.876 0 0 0 0 2.06c.544.832 1.769 2.547 3.534 4.064C6.758 18.605 9.148 20 12 20c2.852 0 5.243-1.395 7.002-2.906 1.765-1.517 2.99-3.232 3.534-4.064.411-.628.411-1.431 0-2.06-.544-.832-1.769-2.547-3.534-4.064C17.242 5.395 14.852 4 12 4Zm-2 8a2 2 0 1 1 4 0 2 2 0 0 1-4 0Zm2-4a4 4 0 1 0 0 8 4 4 0 0 0 0-8Z",fill:"#000"})))}},14845:function(e,t,n){"use strict";var r,a,o=n(2265);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.Z=function(e){return o.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),r||(r=o.createElement("defs",null,o.createElement("path",{id:"max_svg__a",d:"M0 0h16v16H0z"}))),o.createElement("g",null,a||(a=o.createElement("mask",{id:"max_svg__b",fill:"#fff"},o.createElement("use",{xlinkHref:"#max_svg__a"}))),o.createElement("g",{mask:"url(#max_svg__b)"},o.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"m0 0 3.33 3.3",transform:"translate(2 2)"}),o.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 3.3 3.33 0",transform:"translate(2 10.667)"}),o.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M3.3 3.3 0 0",transform:"translate(10.7 10.667)"}),o.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M3.3 0 0 3.3",transform:"translate(10.667 2)"}),o.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 0h3v3",transform:"translate(11 2)"}),o.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M3 0v3H0",transform:"translate(11 11)"}),o.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M3 3H0V0",transform:"translate(2 11)"}),o.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 3V0h3",transform:"translate(2 2)"}))))}},68397:function(e,t,n){"use strict";var r,a,o=n(2265);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.Z=function(e){return o.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),r||(r=o.createElement("defs",null,o.createElement("path",{id:"min_svg__a",d:"M0 0h16v16H0z"}))),o.createElement("g",null,a||(a=o.createElement("mask",{id:"min_svg__b",fill:"#fff"},o.createElement("use",{xlinkHref:"#min_svg__a"}))),o.createElement("g",{mask:"url(#min_svg__b)"},o.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"m0 0 3.33 3.3",transform:"translate(2 2)"}),o.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 3.3 3.33 0",transform:"translate(2 10.667)"}),o.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M3.3 3.3 0 0",transform:"translate(10.7 10.667)"}),o.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M3.3 0 0 3.3",transform:"translate(10.667 2)"}),o.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 0v3h3",transform:"translate(10.667 2.333)"}),o.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M3 0v3H0",transform:"translate(2.333 2.333)"}),o.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M3 3V0H0",transform:"translate(2.333 10.667)"}),o.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 3V0h2.97",transform:"translate(10.667 10.667)"}))))}},98829:function(e,t,n){"use strict";var r,a,o=n(2265);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.Z=function(e){return o.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),r||(r=o.createElement("defs",null,o.createElement("path",{id:"reload_svg__a",d:"M0 0h16v16H0z"}))),o.createElement("g",null,a||(a=o.createElement("mask",{id:"reload_svg__b",fill:"#fff"},o.createElement("use",{xlinkHref:"#reload_svg__a"}))),o.createElement("g",{mask:"url(#reload_svg__b)"},o.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(14 2.667)",d:"M0 0v5.33"}),o.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(2 8)",d:"M0 0v5.33"}),o.createElement("path",{style:{stroke:"#333",strokeWidth:1.333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(2 2)",d:"M12.003 6a6.005 6.005 0 0 0-10.32-4.17M0 6a6.005 6.005 0 0 0 10.17 4.32"}))))}},24053:function(e,t,n){"use strict";var r,a,o,s=n(2265);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.Z=function(e){return s.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",width:30,height:14,fill:"#fff",viewBox:"0 0 120 30"},e),r||(r=s.createElement("circle",{cx:15,cy:15,r:15,fill:"var(--primary, red)"},s.createElement("animate",{attributeName:"r",begin:"0s",calcMode:"linear",dur:"0.8s",from:15,repeatCount:"indefinite",to:15,values:"15;9;15"}),s.createElement("animate",{attributeName:"fill-opacity",begin:"0s",calcMode:"linear",dur:"0.8s",from:1,repeatCount:"indefinite",to:1,values:"1;.5;1"}))),a||(a=s.createElement("circle",{cx:60,cy:15,r:9,fill:"var(--primary, red)",fillOpacity:.3},s.createElement("animate",{attributeName:"r",begin:"0s",calcMode:"linear",dur:"0.8s",from:9,repeatCount:"indefinite",to:9,values:"9;15;9"}),s.createElement("animate",{attributeName:"fill-opacity",begin:"0s",calcMode:"linear",dur:"0.8s",from:.5,repeatCount:"indefinite",to:.5,values:".5;1;.5"}))),o||(o=s.createElement("circle",{cx:105,cy:15,r:15,fill:"var(--primary, red)"},s.createElement("animate",{attributeName:"r",begin:"0s",calcMode:"linear",dur:"0.8s",from:15,repeatCount:"indefinite",to:15,values:"15;9;15"}),s.createElement("animate",{attributeName:"fill-opacity",begin:"0s",calcMode:"linear",dur:"0.8s",from:1,repeatCount:"indefinite",to:1,values:"1;.5;1"}))))}},9745:function(e,t,n){Promise.resolve().then(n.bind(n,49019)),Promise.resolve().then(n.bind(n,44441))},28586:function(e,t,n){"use strict";n.d(t,{HT:function(){return i},a4:function(){return l}});var r=n(29222),a=n(29380);let o=r.Z.create({timeout:6e4,headers:{"content-type":"application/json"}});function s(e,t,n,r){for(let e in t)(null===t[e]||void 0===t[e])&&delete t[e];return o.request({baseURL:"/api",url:e,method:r,data:"GET"===r?null:t,params:"GET"===r?t:null,...n}).then(e=>{var t;return void 0===(t=e.data)?(console.log("error->",t,"data is empty"),Promise.reject("服务器异常")):t.code<200||t.code>=400?Promise.reject(t):t.data}).catch(e=>(console.log("error->","请求错误",e),e)?"string"==typeof e?Promise.reject({message:e}):((null==e?void 0:e.code)in a.o6&&window.location.replace("/#/login"),e):Promise.reject({message:"未知错误"}))}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return s(e,t,n,"GET")}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return s(e,t,n,"POST")}o.interceptors.request.use(function(e){return e.headers,e},e=>Promise.reject(e)),o.interceptors.response.use(function(e){return e},e=>Promise.reject(e))},45138:function(e,t,n){"use strict";n.d(t,{F5:function(){return h},Km:function(){return s},Lb:function(){return u},NB:function(){return d},Q0:function(){return l},Qj:function(){return f},SV:function(){return c},oK:function(){return o},pi:function(){return i},sT:function(){return m}});var r=n(28586),a=n(24101);let o=e=>(0,r.a4)("/user/sendAuthCode",e),s=()=>(0,r.HT)("/user/promotion/getPromotionData"),i=e=>{let{username:t,password:n,code:o,inviterId:s}=e;return(0,r.a4)("/user/register",{username:t,code:o,inviterId:s,password:(0,a.ij)(n)})},l=e=>{let{username:t,code:n,password:o}=e;return(0,r.a4)("/user/updatePasswordByCode",{username:t,code:n,password:(0,a.ij)(o)})},c=e=>{let{username:t,password:n}=e;return(0,r.a4)("/user/loginByPassword",{username:t,password:(0,a.ij)(n)})},d=e=>(0,r.a4)("/user/getBill",e),u=()=>(0,r.HT)("/user/getPayOrders"),m=e=>(0,r.HT)("/user/checkPayResult?payId=".concat(e)),h=e=>(0,r.HT)("/user/promotion/getPromotions?".concat((0,a.iO)(e))),f=e=>(0,r.a4)("/user/inform/list",e)},19035:function(e,t,n){"use strict";n.d(t,{K$:function(){return d},hi:function(){return u},wU:function(){return m}});var r=n(58058),a=n(29380),o=n(78566),s=n(48718),i=n(98455),l=n(27134);class c{path(e){let t=o._X.getState().openaiUrl;return 0===t.length&&(t=a.Ky),t.endsWith("/")&&(t=t.slice(0,t.length-1)),[t="https://xzgpt.fkvip.club/api/openapi/v1",e].join("/")}extractMessage(e){var t,n,r,a;return null!==(a=null===(r=e.choices)||void 0===r?void 0:null===(n=r.at(0))||void 0===n?void 0:null===(t=n.message)||void 0===t?void 0:t.content)&&void 0!==a?a:""}async chat(e){var t,n;let r=e.messages.map(e=>({role:e.role,content:e.content})),c={...o.MG.getState().modelConfig,...o.aK.getState().currentSession().mask.modelConfig,model:e.config.model,appId:e.config.appId,chatId:e.config.chatId},d={messages:r,stream:e.config.stream,model:c.model,appId:c.appId,chatId:c.chatId};console.log("[Request] openai payload: ",d);let u=!!e.config.stream,h=new AbortController;null===(t=e.onController)||void 0===t||t.call(e,h);try{let t=this.path(a.mX.ChatPath),n={method:"POST",body:JSON.stringify(d),signal:h.signal,headers:m()},r=setTimeout(()=>h.abort(),a.tb);if(u){let a="",o=!1,c=()=>{o||(e.onFinish(a),o=!0)};h.signal.onabort=c,(0,i.L)(t,{...n,async onopen(e){var t;clearTimeout(r);let n=e.headers.get("content-type");if(console.log("[OpenAI] request response content type: ",n),null==n?void 0:n.startsWith("text/plain"))return a=await e.clone().text(),c();if(!e.ok||!(null===(t=e.headers.get("content-type"))||void 0===t?void 0:t.startsWith(i.a))||200!==e.status){let t=[a],n=await e.clone().text();try{let t=await e.clone().json();n=(0,l.B)(t)}catch(e){}return 401===e.status&&t.push(s.ZP.Error.Unauthorized),n&&t.push(n),a=t.join("\n\n"),c()}},onmessage(t){if("[DONE]"===t.data||o)return c();let n=t.data;try{let t=JSON.parse(n),o=t.choices[0].delta.content;if(o){var r;a+=o,null===(r=e.onUpdate)||void 0===r||r.call(e,a,o)}}catch(e){console.error("[Request] parse error",n,t)}},onclose(){c()},onerror(t){var n;throw null===(n=e.onError)||void 0===n||n.call(e,t),t},openWhenHidden:!0})}else{let a=await fetch(t,n);clearTimeout(r);let o=await a.json(),s=this.extractMessage(o);e.onFinish(s)}}catch(t){console.log("[Request] failed to make a chat request",t),null===(n=e.onError)||void 0===n||n.call(e,t)}}async usage(){let e=e=>"".concat(e.getFullYear(),"-").concat((e.getMonth()+1).toString().padStart(2,"0"),"-").concat(e.getDate().toString().padStart(2,"0")),t=new Date,n=new Date(t.getFullYear(),t.getMonth(),1),r=e(n),o=e(new Date(Date.now()+864e5)),[i,l]=await Promise.all([fetch(this.path("".concat(a.mX.UsagePath,"?start_date=").concat(r,"&end_date=").concat(o)),{method:"GET",headers:m()}),fetch(this.path(a.mX.SubsPath),{method:"GET",headers:m()})]);if(401===i.status)throw Error(s.ZP.Error.Unauthorized);if(!i.ok||!l.ok)throw Error("Failed to query usage from openai");let c=await i.json(),d=await l.json();if(c.error&&c.error.type)throw Error(c.error.message);return c.total_usage&&(c.total_usage=Math.round(c.total_usage)/100),d.hard_limit_usd&&(d.hard_limit_usd=Math.round(100*d.hard_limit_usd)/100),{used:c.total_usage,total:d.hard_limit_usd}}async models(){var e;if(this.disableListModels)return a.Fv.slice();let t=await fetch(this.path(a.mX.ListModelPath),{method:"GET",headers:{...m()}}),n=await t.json(),r=null===(e=n.data)||void 0===e?void 0:e.filter(e=>e.id.startsWith("gpt-"));return(console.log("[Models]",r),r)?r.map(e=>({name:e.id,available:!0})):[]}constructor(){this.disableListModels=!0}}let d=["system","user","assistant"],u=new class{config(){}prompts(){}masks(){}async share(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.map(e=>({from:"user"===e.role?"human":"gpt",value:e.content})).concat([{from:"human",value:"Share from [千知GPT]: https://github.com/Yidadaa/ChatGPT-Next-Web"}]);console.log("[Share]",e,n);let a=(0,r.Z)(),o=(null==a?void 0:a.isApp)?"https://sharegpt.com/api/conversations":"/sharegpt",s=await fetch(o,{body:JSON.stringify({avatarUrl:t,items:n}),headers:{"Content-Type":"application/json"},method:"POST"}),i=await s.json();if(console.log("[Share]",i),i.id)return"https://shareg.pt/".concat(i.id)}constructor(){this.llm=new c}};function m(){var e,t;let n=o._X.getState(),r={"Content-Type":"application/json","x-requested-with":"XMLHttpRequest"},s=e=>"Bearer ".concat(e.trim());return(e=n.token)&&e.length>0?r.Authorization=s(n.token):n.enabledAccessControl()&&(t=n.accessCode)&&t.length>0&&(r.Authorization=s(a.TW+n.accessCode)),r}},48183:function(e,t,n){"use strict";n.d(t,{L:function(){return r}});let r={controllers:{},addController(e,t,n){let r=this.key(e,t);return this.controllers[r]=n,r},stop(e,t){let n=this.key(e,t),r=this.controllers[n];null==r||r.abort()},stopAll(){Object.values(this.controllers).forEach(e=>e.abort())},hasPending(){return Object.values(this.controllers).length>0},remove(e,t){let n=this.key(e,t);delete this.controllers[n]},key:(e,t)=>"".concat(e,",").concat(t)}},71856:function(e,t,n){"use strict";n.d(t,{h:function(){return s}});var r=n(57437);n(2265);var a=n(61578),o=n.n(a);function s(e){var t,n;return(0,r.jsxs)("button",{className:o()["icon-button"]+" ".concat(e.bordered&&o().border," ").concat(e.shadow&&o().shadow," ").concat(null!==(t=e.className)&&void 0!==t?t:""," clickable ").concat(o()[null!==(n=e.type)&&void 0!==n?n:""]),onClick:e.onClick,title:e.title,disabled:e.disabled,role:"button",tabIndex:e.tabIndex,autoFocus:e.autoFocus,children:[e.icon&&(0,r.jsx)("div",{className:o()["icon-button-icon"]+" ".concat("primary"===e.type&&"no-dark"),children:e.icon}),e.text&&(0,r.jsx)("div",{className:o()["icon-button-text"],children:e.text})]})}},70395:function(e,t,n){"use strict";n.d(t,{S:function(){return p}});var r,a,o=n(57437),s=n(2265),i=n(71856);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c=function(e){return s.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),r||(r=s.createElement("defs",null,s.createElement("path",{id:"github_svg__a",d:"M0 0h16v16H0z"}))),s.createElement("g",null,a||(a=s.createElement("mask",{id:"github_svg__b",fill:"#fff"},s.createElement("use",{xlinkHref:"#github_svg__a"}))),s.createElement("g",{mask:"url(#github_svg__b)"},s.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M7.11 8.51c.81-.16 1.53-.45 2.1-.87.96-.73 1.46-1.85 1.46-2.95 0-.78-.3-1.5-.81-2.11-.28-.34.55-2.89-.19-2.55-.73.34-1.81 1.1-2.38.94C6.68.79 6.02.69 5.33.69c-.6 0-1.17.07-1.71.21-.79.2-1.53-.54-2.29-.87C.58-.29.99 2.34.77 2.62.28 3.22 0 3.93 0 4.69c0 1.1.6 2.22 1.56 2.95.65.48 1.45.78 2.35.94",transform:"translate(2.667 1.645)"}),s.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M.58 0C.19.43 0 .83 0 1.21v2.91",transform:"translate(6 10.22)"}),s.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 0c.37.48.55.91.55 1.29v2.89",transform:"translate(9.782 10.159)"}),s.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 0c.3.04.52.17.67.41C.88.77 1.69 2.1 2.61 2.1H4",transform:"translate(2 10.405)"}))))},d=n(98829),u=n(29380),m=n(48718),h=n(74709),f=n(26537);class p extends s.Component{componentDidCatch(e,t){this.setState({hasError:!0,error:e,info:t})}clearAndSaveData(){try{(0,h.CP)(JSON.stringify(localStorage),"chatgpt-next-web-snapshot.json")}finally{localStorage.clear(),location.reload()}}render(){if(this.state.hasError){var e,t;return(0,o.jsxs)("div",{className:"error",children:[(0,o.jsx)("h2",{children:"Oops, something went wrong!"}),(0,o.jsxs)("pre",{children:[(0,o.jsx)("code",{children:null===(e=this.state.error)||void 0===e?void 0:e.toString()}),(0,o.jsx)("code",{children:null===(t=this.state.info)||void 0===t?void 0:t.componentStack})]}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,o.jsx)("a",{href:u.TH,className:"report",children:(0,o.jsx)(i.h,{text:"Report This Error",icon:(0,o.jsx)(c,{}),bordered:!0})}),(0,o.jsx)(i.h,{icon:(0,o.jsx)(d.Z,{}),text:"Clear All Data",onClick:async()=>{await (0,f.i0)(m.ZP.Settings.Danger.Reset.Confirm)&&this.clearAndSaveData()},bordered:!0})]})]})}return this.props.children}constructor(e){super(e),this.state={hasError:!1,error:null,info:null}}}},49019:function(e,t,n){"use strict";n.r(t),n.d(t,{Home:function(){return eC},Loading:function(){return eh},useLoadData:function(){return ek},useSwitchTheme:function(){return ey}});var r,a,o,s,i,l,c,d,u,m=n(57437),h=n(2265),f=n(82532),p=n.n(f),g=n(30217),v=n(24053),b=n(74709),y=n(98864),_=n.n(y),w=n(29380),x=n(70395),k=n(5954),C=n(19238),E=n(71856);function S(){return(S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var j=function(e){return h.createElement("svg",S({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),r||(r=h.createElement("defs",null,h.createElement("path",{id:"settings_svg__a",d:"M0 0h16v16H0z"}))),h.createElement("g",null,a||(a=h.createElement("mask",{id:"settings_svg__b",fill:"#fff"},h.createElement("use",{xlinkHref:"#settings_svg__a"}))),h.createElement("g",{mask:"url(#settings_svg__b)"},h.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(1.333 2.333)",d:"M13.33 5.67 10 0H3.33L0 5.67l3.33 5.66H10l3.33-5.66Z"}),h.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(6.333 6.333)",d:"M3.33 1.67C3.33.75 2.59 0 1.67 0 .75 0 0 .75 0 1.67c0 .92.75 1.66 1.67 1.66.92 0 1.66-.74 1.66-1.66Z"}))))};function M(){return(M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var T=function(e){return h.createElement("svg",M({className:"user_svg__icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:200,height:200},e),o||(o=h.createElement("path",{d:"m960.8 710.4-17.9-40.3a4 4 0 0 0-4.7-2.2l-53.7 14.6-31-31 14.6-53.7a4 4 0 0 0-2.2-4.7l-40.3-17.9a4 4 0 0 0-5 1.6l-29.3 48.8h-41.4l-29.3-48.8a4 4 0 0 0-5-1.6l-40.5 18a4 4 0 0 0-2.3 4.4l9.7 53.9-31 31-53.7-14.6a4 4 0 0 0-4.7 2.2l-17.9 40.3a4 4 0 0 0 1.6 5l48.8 29.3v41.4l-48.8 29.3a4 4 0 0 0-1.6 5l18 40.5a4 4 0 0 0 4.4 2.3l53.9-9.7 31 31-14.6 53.7a4 4 0 0 0 2.2 4.7l40.3 17.9a4 4 0 0 0 5-1.6l29.3-48.8h41.4l29.3 48.8a4 4 0 0 0 5 1.6l40.3-17.9a4 4 0 0 0 2.2-4.7l-14.6-53.7 31-31 53.7 14.6a4 4 0 0 0 4.7-2.2l18.1-40.7a4 4 0 0 0-1.2-4.7l-44.2-34.4v-41.4l48.8-29.3a4 4 0 0 0 1.6-5zM768.2 846a78 78 0 1 1 78-78 78 78 0 0 1-78 78zm5.8-504c0-144.7-117.3-262-262-262S250 197.3 250 342a261.7 261.7 0 0 0 117.4 218.5c-140 57.4-239.3 195.4-239.3 355.5v25.5a4 4 0 0 0 4 4h64a4 4 0 0 0 4-4V916a307.1 307.1 0 0 1 24.6-120.9 315.1 315.1 0 0 1 166.4-166.5A307.9 307.9 0 0 1 512 604c144.7 0 262-117.3 262-262zM512 532a189.8 189.8 0 1 1 134.4-55.6A189.1 189.1 0 0 1 512 532z",fill:"#2c2c2c"})))};function P(){return(P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var O=function(e){return h.createElement("svg",P({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:43,height:44,fill:"none"},e),s||(s=h.createElement("defs",null,h.createElement("path",{id:"chatgpt_svg__a",d:"M0 0h43v43.58H0z"}))),h.createElement("g",null,i||(i=h.createElement("mask",{id:"chatgpt_svg__b",fill:"#fff"},h.createElement("use",{xlinkHref:"#chatgpt_svg__a"}))),h.createElement("g",{mask:"url(#chatgpt_svg__b)"},h.createElement("path",{fillRule:"evenodd",style:{fill:"#8bcae0"},opacity:.27,d:"M40.17 17.84c.36-1.11.55-2.27.55-3.43 0-1.93-.51-3.83-1.49-5.49a10.98 10.98 0 0 0-9.52-5.51c-.77 0-1.55.08-2.3.24A10.868 10.868 0 0 0 19.29 0h-.1c-4.76 0-8.98 3.07-10.45 7.6-3.06.63-5.71 2.55-7.26 5.27a10.993 10.993 0 0 0 1.35 12.87c-.36 1.11-.55 2.27-.55 3.43 0 1.93.51 3.83 1.49 5.49a10.97 10.97 0 0 0 11.82 5.27c2.06 2.32 5.02 3.65 8.12 3.65h.1c4.76 0 8.99-3.07 10.45-7.61a10.82 10.82 0 0 0 7.26-5.26 10.995 10.995 0 0 0-1.35-12.87ZM18.817 38.695c-.09.05-.17.1-.26.15a8.145 8.145 0 0 0 5.22 1.89h.01c4.5-.01 8.15-3.67 8.16-8.17v-10.13a.153.153 0 0 0-.07-.1l-3.67-2.12v12.24c0 .51-.27.98-.72 1.23l-8.67 5.01Zm-1.424-2.472 8.77-5.06c.04-.03.06-.07.06-.11h-.01v-4.24l-10.59 6.12c-.44.25-.98.25-1.42 0l-8.68-5.01c-.08-.05-.2-.12-.26-.16a8.19 8.19 0 0 0 .97 5.47 8.18 8.18 0 0 0 7.08 4.08c1.43 0 2.84-.37 4.08-1.09Zm-9.187-25.21v-.3c-1.79.66-3.3 1.93-4.25 3.58a8.226 8.226 0 0 0-1.09 4.08c0 2.92 1.55 5.61 4.08 7.07l8.77 5.07c.04.02.09.02.12-.01l3.67-2.12-10.59-6.11c-.44-.25-.71-.72-.71-1.23v-10.03Zm27.849 7.117-8.77-5.07a.126.126 0 0 0-.12.01l-3.67 2.12 10.59 6.12c.44.25.71.71.71 1.22v10.33a8.168 8.168 0 0 0 5.35-7.66 8.16 8.16 0 0 0-4.09-7.07Zm-19.22-5.718a.16.16 0 0 0-.05.11v4.24l10.59-6.12c.22-.12.47-.19.72-.19s.49.07.71.19l8.68 5.02c.08.05.17.1.25.15.08-.46.12-.92.12-1.38 0-4.51-3.66-8.17-8.17-8.17-1.43 0-2.83.38-4.08 1.09l-8.77 5.06ZM19.22 2.85c-4.51 0-8.17 3.65-8.17 8.16v10.13c.01.05.03.08.07.1l3.67 2.12.01-12.23v-.01c0-.5.27-.97.71-1.22l8.68-5.01c.07-.05.19-.11.25-.15a8.145 8.145 0 0 0-5.22-1.89ZM16.783 24.51l4.72 2.73 4.72-2.73v-5.45l-4.72-2.72-4.72 2.73v5.44Z"}))))},N=n(58870),D=n(38669);function I(){return(I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var A=function(e){return h.createElement("svg",I({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),l||(l=h.createElement("defs",null,h.createElement("path",{id:"mask_svg__a",d:"M0 0h16v16H0z"}))),h.createElement("g",null,c||(c=h.createElement("mask",{id:"mask_svg__b",fill:"#fff"},h.createElement("use",{xlinkHref:"#mask_svg__a"}))),h.createElement("g",{mask:"url(#mask_svg__b)"},h.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M6 0C2.69 0 0 2.54 0 5.67s2.69 5.66 6 5.66 6-2.53 6-5.66C12 2.54 9.31 0 6 0Z",transform:"translate(2 3.333)"}),h.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M1 0C.45 0 0 .6 0 1.33c0 .74.45 1.34 1 1.34s1-.6 1-1.34C2 .6 1.55 0 1 0Z",transform:"rotate(15 -22.183 22.313)"}),h.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M1 0C.45 0 0 .6 0 1.33c0 .74.45 1.34 1 1.34s1-.6 1-1.34C2 .6 1.55 0 1 0Z",transform:"rotate(165 5.213 5.304)"}),h.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M4 4.51c1.04-1.04 1.15-2.74.1-3.78C3.06-.32 1.04-.2 0 .84",transform:"translate(9.667 2.493)"}),h.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M.84 4.51C-.2 3.47-.32 1.77.73.73 1.77-.32 3.8-.2 4.84.84",transform:"translate(1.493 2.493)"}),h.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 0c.17.43.73 1.09 1.67.29.93.8 1.5.14 1.66-.29",transform:"translate(6.5 11.67)"}))))};function Z(){return(Z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var H=function(e){return h.createElement("svg",Z({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),h.createElement("g",null,d||(d=h.createElement("mask",{id:"plugin_svg__b",fill:"#fff"},h.createElement("use",{xlinkHref:"#plugin_svg__a"}))),h.createElement("g",{mask:"url(#plugin_svg__b)"},h.createElement("path",{style:{fill:"#333",opacity:1},d:"M6.945 1.725c.261.26.392.576.392.945V6c0 .37-.13.684-.392.945A1.288 1.288 0 0 1 6 7.337H2.67c-.37 0-.684-.13-.945-.392A1.288 1.288 0 0 1 1.333 6V2.67c0-.37.13-.684.392-.945.26-.261.576-.392.945-.392H6c.37 0 .684.13.945.392zM2.667 6c0 .002 0 .003.003.003H6c.002 0 .003 0 .003-.003V2.67c0-.002 0-.003-.003-.003H2.67c-.002 0-.003 0-.003.003zM6.945 9.058c.261.261.392.576.392.945v3.33c0 .37-.13.685-.392.946A1.288 1.288 0 0 1 6 14.67H2.67c-.37 0-.684-.13-.945-.391a1.288 1.288 0 0 1-.392-.946v-3.33c0-.369.13-.684.392-.945.26-.26.576-.391.945-.391H6c.37 0 .684.13.945.391zm-4.278 4.275c0 .003 0 .004.003.004H6c.002 0 .003-.001.003-.004v-3.33c0-.002 0-.003-.003-.003H2.67c-.002 0-.003.001-.003.003zM13.789 6.455a2.987 2.987 0 0 1-2.126.882c-.407 0-.797-.08-1.169-.238a2.97 2.97 0 0 1-.952-.645 2.983 2.983 0 0 1-.64-.956 2.984 2.984 0 0 1-.235-1.168 2.974 2.974 0 0 1 .876-2.12 2.973 2.973 0 0 1 2.12-.877c.407 0 .796.079 1.169.235.36.151.678.365.955.64a2.97 2.97 0 0 1 .883 2.122 2.988 2.988 0 0 1-.882 2.125zm-2.126-3.788c-.46 0-.853.162-1.177.486A1.603 1.603 0 0 0 10 4.33c0 .462.162.857.487 1.184.325.326.717.49 1.176.49.461 0 .855-.164 1.183-.492.327-.327.49-.721.49-1.182 0-.46-.163-.851-.489-1.176a1.618 1.618 0 0 0-1.184-.487zM14.278 9.058c.261.261.392.576.392.945v3.33c0 .37-.13.685-.392.946a1.288 1.288 0 0 1-.945.391h-3.33c-.369 0-.684-.13-.945-.391a1.288 1.288 0 0 1-.391-.946v-3.33c0-.369.13-.684.391-.945.261-.26.576-.391.945-.391h3.33c.37 0 .684.13.945.391zM10 13.333c0 .003.001.004.003.004h3.33c.003 0 .004-.001.004-.004v-3.33c0-.002-.001-.003-.004-.003h-3.33c-.002 0-.003.001-.003.003z"}))),u||(u=h.createElement("defs",null,h.createElement("path",{id:"plugin_svg__a",d:"M0 0h16v16H0z"}))))},z=n(36177),F=n(48718),W=n(78566),L=n(26537);let U=_()(async()=>(await Promise.all([n.e(4560),n.e(3338),n.e(5560),n.e(8167),n.e(224)]).then(n.bind(n,90965))).ChatList,{loadableGenerated:{webpack:()=>[90965]},loading:()=>null});function G(e){let t=(0,W.aK)(),{onDragMouseDown:n,shouldNarrow:r}=function(){var e;let t=e=>Math.min(w.kf,e),n=(0,W.MG)(),r=(0,h.useRef)(0),a=(0,h.useRef)(null!==(e=n.sidebarWidth)&&void 0!==e?e:300),o=(0,h.useRef)(Date.now()),s=(0,h.useRef)(e=>{if(Date.now()<o.current+50)return;o.current=Date.now();let s=e.clientX-r.current,i=t(a.current+s);n.update(e=>e.sidebarWidth=i)}),i=(0,h.useRef)(()=>{var e;a.current=null!==(e=n.sidebarWidth)&&void 0!==e?e:300,window.removeEventListener("mousemove",s.current),window.removeEventListener("mouseup",i.current)}),l=(0,b.S0)(),c=!l&&n.sidebarWidth<w.NQ;return(0,h.useEffect)(()=>{var e;let r=c?w.bH:t(null!==(e=n.sidebarWidth)&&void 0!==e?e:300),a=l?"100vw":"".concat(r,"px");document.documentElement.style.setProperty("--sidebar-width",a)},[n.sidebarWidth,l,c]),{onDragMouseDown:e=>{r.current=e.clientX,window.addEventListener("mousemove",s.current),window.addEventListener("mouseup",i.current)},shouldNarrow:c}}(),a=(0,k.s0)(),o=(0,W.MG)();return!function(){let e=(0,W.aK)();(0,h.useEffect)(()=>{let t=t=>{(t.altKey||t.ctrlKey)&&("ArrowUp"===t.key?e.nextSession(-1):"ArrowDown"===t.key&&e.nextSession(1))};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)})}(),(0,m.jsxs)("div",{className:"".concat(p().sidebar," ").concat(e.className," ").concat(r&&p()["narrow-sidebar"]),children:[(0,m.jsxs)("div",{className:p()["sidebar-header"],"data-tauri-drag-region":!0,children:[(0,m.jsx)("div",{className:p()["sidebar-title"],"data-tauri-drag-region":!0,children:"千知GPT"}),(0,m.jsx)("div",{className:p()["sidebar-sub-title"],children:"构建属于你的人工智能助手"}),(0,m.jsx)("div",{className:p()["sidebar-logo"]+" no-dark",children:(0,m.jsx)(O,{})})]}),(0,m.jsxs)("div",{className:p()["sidebar-header-bar"],children:[(0,m.jsx)(E.h,{icon:(0,m.jsx)(A,{}),text:r?void 0:F.ZP.Mask.Name,className:p()["sidebar-bar-button"],onClick:()=>a(w.y$.NewChat,{state:{fromHome:!0}}),shadow:!0}),(0,m.jsx)(E.h,{icon:(0,m.jsx)(H,{}),text:r?void 0:F.ZP.Plugin.Name,className:p()["sidebar-bar-button"],onClick:()=>(0,L.CF)(F.ZP.WIP),shadow:!0})]}),(0,m.jsx)("div",{className:p()["sidebar-body"],onClick:e=>{e.target===e.currentTarget&&a(w.y$.Home)},children:(0,m.jsx)(U,{narrow:r})}),(0,m.jsxs)("div",{className:p()["sidebar-tail"],children:[(0,m.jsxs)("div",{className:p()["sidebar-actions"],children:[(0,m.jsx)("div",{className:p()["sidebar-action"]+" "+p().mobile,children:(0,m.jsx)(E.h,{icon:(0,m.jsx)(D.Z,{}),onClick:async()=>{await (0,L.i0)(F.ZP.Home.DeleteChat)&&t.deleteSession(t.currentSessionIndex)}})}),(0,m.jsx)("div",{className:p()["sidebar-action"],children:(0,m.jsx)(C.rU,{to:w.y$.Settings,children:(0,m.jsx)(E.h,{icon:(0,m.jsx)(j,{}),shadow:!0})})}),(0,m.jsx)("div",{className:p()["sidebar-action"],children:(0,m.jsx)(C.rU,{to:"".concat(w.y$.Number,"?type=").concat(w.fC.bill),children:(0,m.jsx)(E.h,{icon:(0,m.jsx)(T,{}),shadow:!0})})})]}),(0,m.jsx)("div",{children:(0,m.jsx)(E.h,{icon:(0,m.jsx)(N.Z,{}),text:r?void 0:F.ZP.Home.NewChat,onClick:()=>{o.dontShowMaskSplashScreen?(t.newSession(),a(w.y$.Chat)):a(w.y$.NewChat)},shadow:!0})})]}),(0,m.jsx)("div",{className:p()["sidebar-drag"],onMouseDown:e=>n(e),children:(0,m.jsx)(z.Z,{})})]})}var R=n(47241),B=n(40689),J=n.n(B),X=n(52890),K=n(26621),V=n(98045),q=n(13621),Q=n(62460),$=n(51371),Y=n(21463),ee=n(59100),et=n(71504),en=n(61865),er=n(45138),ea=n(24351);let eo={maxWidth:"100%",borderRadius:"4px",textAlign:"left"};function es(e){let{setPageType:t}=e,{register:n,handleSubmit:r,formState:{errors:a}}=(0,en.cI)(),{toast:o}=(0,ea.p)(),s=(0,k.s0)(),[i,l]=(0,h.useState)(!1),c=(0,h.useCallback)(async e=>{let{username:t,password:n}=e;l(!0);try{let e=await (0,er.SV)({username:t,password:n}),{user:r}=e;(null==r?void 0:r._id)&&(o({title:"登录成功",status:"success"}),localStorage.setItem("user",JSON.stringify(r)),setTimeout(()=>{s(w.y$.NewChat)},500))}catch(e){o({title:e.message||"登录异常",status:"error"})}l(!1)},[]);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(q.xu,{fontWeight:"bold",fontSize:"2xl",textAlign:"center",children:"登录千知GPT"}),(0,m.jsxs)("form",{onSubmit:r(c),children:[(0,m.jsxs)($.NI,{mt:8,isInvalid:!!a.username,children:[(0,m.jsx)(Y.I,{placeholder:"邮箱/手机号",style:eo,...n("username",{required:"邮箱/手机号不能为空",pattern:{value:/(^1[3456789]\d{9}$)|(^[A-Za-z0-9]+([_\.][A-Za-z0-9]+)*@([A-Za-z0-9\-]+\.)+[A-Za-z]{2,6}$)/,message:"邮箱/手机号格式错误"}})}),(0,m.jsx)(ee.J1,{position:"absolute",fontSize:"xs",children:!!a.username&&a.username.message})]}),(0,m.jsxs)($.NI,{mt:8,isInvalid:!!a.password,children:[(0,m.jsx)(Y.I,{type:"password",style:eo,placeholder:"密码",...n("password",{required:"密码不能为空",minLength:{value:4,message:"密码最少4位最多12位"},maxLength:{value:12,message:"密码最少4位最多12位"}})}),(0,m.jsx)(ee.J1,{position:"absolute",fontSize:"xs",children:!!a.password&&a.password.message})]}),(0,m.jsxs)(K.k,{align:"center",justifyContent:"space-between",mt:6,color:"myBlue.600",children:[(0,m.jsx)(q.xu,{cursor:"pointer",_hover:{textDecoration:"underline"},onClick:()=>t(w.DZ.forgetPassword),fontSize:"sm",children:"忘记密码?"}),(0,m.jsx)(q.xu,{cursor:"pointer",_hover:{textDecoration:"underline"},onClick:()=>t(w.DZ.register),fontSize:"sm",children:"注册账号"})]}),(0,m.jsx)(et.z,{type:"submit",mt:8,w:"100%",size:["md","lg"],colorScheme:"blue",isLoading:i,children:"登录"})]})]})}function ei(e){return(0,m.jsxs)("div",{className:J()["loading-content"]+" no-dark",children:[!e.noLogo&&(0,m.jsx)(g.Z,{}),(0,m.jsx)(v.Z,{})]})}let el=_()(async()=>(await n.e(2596).then(n.bind(n,52596))).RegisterForm,{loadableGenerated:{webpack:()=>[52596]},loading:()=>(0,m.jsx)(ei,{noLogo:!0})}),ec=_()(async()=>(await n.e(9213).then(n.bind(n,9213))).ForgetPasswordForm,{loadableGenerated:{webpack:()=>[9213]},loading:()=>(0,m.jsx)(ei,{noLogo:!0})});function ed(){(0,W._X)();let[e,t]=(0,h.useState)(w.DZ.login);return(0,m.jsx)(X.x,{theme:Q.r,children:(0,m.jsx)(K.k,{alignItems:"center",justifyContent:"center",className:J()["login-page"],h:"100%",px:[0,"10vw"],children:(0,m.jsxs)(K.k,{height:"100%",w:"100%",maxW:"1240px",maxH:["auto","max(660px,80vh)"],backgroundColor:"#fff",alignItems:"center",justifyContent:"center",py:[5,10],px:"5vw",borderRadius:"md",gap:5,children:[(0,m.jsx)(V.E,{src:"https://fastgpt.run/icon/loginLeft.svg",order:e===w.DZ.login?0:2,flex:"1 0 0",w:"0",maxW:"600px",height:"100%",maxH:"450px",alt:""}),(0,m.jsx)(q.xu,{order:1,flex:"0 0 ".concat("400px"),height:"100%",border:"1px",borderColor:"gray.200",py:5,px:10,borderRadius:"md",children:(0,m.jsx)(function(e){let{type:n}=e,r={[w.DZ.login]:es,[w.DZ.register]:el,[w.DZ.forgetPassword]:ec},a=r[n];return(0,m.jsx)(a,{setPageType:t})},{type:e})})]})})})}var eu=n(58058),em=n(19035);function eh(e){return(0,m.jsxs)("div",{className:p()["loading-content"]+" no-dark",children:[!e.noLogo&&(0,m.jsx)(g.Z,{}),(0,m.jsx)(v.Z,{})]})}n(92982);let ef=_()(async()=>(await Promise.all([n.e(4560),n.e(8970),n.e(592)]).then(n.bind(n,13092))).Settings,{loadableGenerated:{webpack:()=>[13092]},loading:()=>(0,m.jsx)(eh,{noLogo:!0})}),ep=_()(async()=>(await Promise.all([n.e(4560),n.e(3338),n.e(5560),n.e(8970),n.e(6006),n.e(8167),n.e(4943)]).then(n.bind(n,99254))).Chat,{loadableGenerated:{webpack:()=>[99254]},loading:()=>(0,m.jsx)(eh,{noLogo:!0})}),eg=_()(async()=>(await Promise.all([n.e(4560),n.e(6772),n.e(7601)]).then(n.bind(n,48263))).Number,{loadableGenerated:{webpack:()=>[48263]},loading:()=>(0,m.jsx)(eh,{noLogo:!0})}),ev=_()(async()=>(await Promise.all([n.e(4560),n.e(3338),n.e(5560),n.e(8167),n.e(6190)]).then(n.bind(n,33639))).NewChat,{loadableGenerated:{webpack:()=>[33639]},loading:()=>(0,m.jsx)(eh,{noLogo:!0})}),eb=_()(async()=>(await Promise.all([n.e(4560),n.e(3338),n.e(5560),n.e(8167),n.e(8340)]).then(n.bind(n,28167))).MaskPage,{loadableGenerated:{webpack:()=>[28167]},loading:()=>(0,m.jsx)(eh,{noLogo:!0})});function ey(){let e=(0,R.MG)();(0,h.useEffect)(()=>{document.body.classList.remove("light"),document.body.classList.remove("dark"),"dark"===e.theme?document.body.classList.add("dark"):"light"===e.theme&&document.body.classList.add("light");let t=document.querySelector('meta[name="theme-color"][media*="dark"]'),n=document.querySelector('meta[name="theme-color"][media*="light"]');if("auto"===e.theme)null==t||t.setAttribute("content","#151515"),null==n||n.setAttribute("content","#fafafa");else{let e=(0,b.K1)("--theme-color");null==t||t.setAttribute("content",e),null==n||n.setAttribute("content",e)}},[e.theme])}let e_=()=>{let[e,t]=(0,h.useState)(!1);return(0,h.useEffect)(()=>{t(!0)},[]),e},ew=()=>{var e;let t=document.createElement("link"),n=(null===(e=(0,eu.Z)())||void 0===e?void 0:e.buildMode)==="export"?"https://fonts.googleapis.com":"/google-fonts";t.rel="stylesheet",t.href=n+"/css2?family=Noto+Sans:wght@300;400;700;900&display=swap",document.head.appendChild(t)};function ex(){let e=(0,R.MG)(),t=(0,k.TH)(),n=t.pathname===w.y$.Home,r=t.pathname===w.y$.Login,a=(0,b.S0)();return(0,h.useEffect)(()=>{ew()},[]),(0,m.jsx)(m.Fragment,{children:r?(0,m.jsx)(ed,{}):(0,m.jsxs)("div",{className:p().container+" ".concat(e.tightBorder&&!a?p()["tight-container"]:p().container," "),children:[(0,m.jsx)(G,{className:n?p()["sidebar-show"]:""}),(0,m.jsx)("div",{className:p()["window-content"],id:w.ym.AppBody,children:(0,m.jsxs)(k.Z5,{children:[(0,m.jsx)(k.AW,{path:w.y$.Home,element:(0,m.jsx)(ep,{})}),(0,m.jsx)(k.AW,{path:w.y$.NewChat,element:(0,m.jsx)(ev,{})}),(0,m.jsx)(k.AW,{path:w.y$.Masks,element:(0,m.jsx)(eb,{})}),(0,m.jsx)(k.AW,{path:w.y$.Chat,element:(0,m.jsx)(ep,{})}),(0,m.jsx)(k.AW,{path:w.y$.Number,element:(0,m.jsx)(eg,{})}),(0,m.jsx)(k.AW,{path:w.y$.Settings,element:(0,m.jsx)(ef,{})})]})})]})})}function ek(){let e=(0,R.MG)();(0,h.useEffect)(()=>{(async()=>{let t=await em.hi.llm.models();e.mergeModels(t)})()},[])}function eC(){return(ey(),ek(),(0,h.useEffect)(()=>{console.log("[Config] got config from build time",(0,eu.Z)()),W._X.getState().fetch()},[]),e_())?(0,m.jsx)(x.S,{children:(0,m.jsx)(C.UT,{children:(0,m.jsx)(ex,{})})}):(0,m.jsx)(eh,{})}},26537:function(e,t,n){"use strict";n.d(t,{II:function(){return S},aV:function(){return w},HC:function(){return _},u_:function(){return x},J2:function(){return y},Ph:function(){return j},i0:function(){return M},vi:function(){return O},K4:function(){return k},G5:function(){return P},CF:function(){return E}});var r,a,o=n(57437),s=n(93144),i=n.n(s);n(24053);var l=n(38669);n(56073);var c=n(2265);function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u=function(e){return c.createElement("svg",d({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),r||(r=c.createElement("defs",null,c.createElement("path",{id:"down_svg__a",d:"M0 0h16v16H0z"}))),c.createElement("g",{transform:"rotate(-90 8 8)"},a||(a=c.createElement("mask",{id:"down_svg__b",fill:"#fff"},c.createElement("use",{xlinkHref:"#down_svg__a"}))),c.createElement("g",{mask:"url(#down_svg__b)"},c.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M4 8 0 4l4-4",transform:"translate(6.333 4)"}))))},m=n(12402),h=n(82985),f=n(14845),p=n(68397),g=n(48718),v=n(34040),b=n(71856);function y(e){return(0,o.jsxs)("div",{className:i().popover,children:[e.children,e.open&&(0,o.jsxs)("div",{className:i()["popover-content"],children:[(0,o.jsx)("div",{className:i()["popover-mask"],onClick:e.onClose}),e.content]})]})}function _(e){return(0,o.jsxs)("div",{className:i()["list-item"]+" ".concat(e.className||""),onClick:e.onClick,children:[(0,o.jsxs)("div",{className:i()["list-header"],children:[e.icon&&(0,o.jsx)("div",{className:i()["list-icon"],children:e.icon}),(0,o.jsxs)("div",{className:i()["list-item-title"],children:[(0,o.jsx)("div",{children:e.title}),e.subTitle&&(0,o.jsx)("div",{className:i()["list-item-sub-title"],children:e.subTitle})]})]}),e.children]})}function w(e){return(0,o.jsx)("div",{className:i().list,children:e.children})}function x(e){var t;(0,c.useEffect)(()=>{let t=t=>{if("Escape"===t.key){var n;null===(n=e.onClose)||void 0===n||n.call(e)}};return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}},[]);let[n,r]=(0,c.useState)(!!e.defaultMax);return(0,o.jsxs)("div",{className:i()["modal-container"]+" ".concat(n&&i()["modal-container-max"]),children:[(0,o.jsxs)("div",{className:i()["modal-header"],children:[(0,o.jsx)("div",{className:i()["modal-title"],children:e.title}),(0,o.jsxs)("div",{className:i()["modal-header-actions"],children:[(0,o.jsx)("div",{className:i()["modal-header-action"],onClick:()=>r(!n),children:n?(0,o.jsx)(p.Z,{}):(0,o.jsx)(f.Z,{})}),(0,o.jsx)("div",{className:i()["modal-header-action"],onClick:e.onClose,children:(0,o.jsx)(l.Z,{})})]})]}),(0,o.jsx)("div",{className:i()["modal-content"],children:e.children}),(0,o.jsx)("div",{className:i()["modal-footer"],children:(0,o.jsx)("div",{className:i()["modal-actions"],children:null===(t=e.actions)||void 0===t?void 0:t.map((e,t)=>(0,o.jsx)("div",{className:i()["modal-action"],children:e},t))})})]})}function k(e){let t=document.createElement("div");t.className="modal-mask",document.body.appendChild(t);let n=(0,v.createRoot)(t),r=()=>{var r;null===(r=e.onClose)||void 0===r||r.call(e),n.unmount(),t.remove()};t.onclick=e=>{e.target===t&&r()},n.render((0,o.jsx)(x,{...e,onClose:r}))}function C(e){return(0,o.jsx)("div",{className:i()["toast-container"],children:(0,o.jsxs)("div",{className:i()["toast-content"],children:[(0,o.jsx)("span",{children:e.content}),e.action&&(0,o.jsx)("button",{onClick:()=>{var t,n,r;null===(n=e.action)||void 0===n||null===(t=n.onClick)||void 0===t||t.call(n),null===(r=e.onClose)||void 0===r||r.call(e)},className:i()["toast-action"],children:e.action.text})]})})}function E(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3,r=document.createElement("div");r.className=i().show,document.body.appendChild(r);let a=(0,v.createRoot)(r),s=()=>{r.classList.add(i().hide),setTimeout(()=>{a.unmount(),r.remove()},300)};setTimeout(()=>{s()},n),a.render((0,o.jsx)(C,{content:e,action:t,onClose:s}))}function S(e){return(0,o.jsx)("textarea",{...e,className:"".concat(i().input," ").concat(e.className)})}function j(e){let{className:t,children:n,...r}=e;return(0,o.jsxs)("div",{className:"".concat(i()["select-with-icon"]," ").concat(t),children:[(0,o.jsx)("select",{className:i()["select-with-icon-select"],...r,children:n}),(0,o.jsx)(u,{className:i()["select-with-icon-icon"]})]})}function M(e){let t=document.createElement("div");t.className="modal-mask",document.body.appendChild(t);let n=(0,v.createRoot)(t),r=()=>{n.unmount(),t.remove()};return new Promise(t=>{n.render((0,o.jsx)(x,{title:g.ZP.UI.Confirm,actions:[(0,o.jsx)(b.h,{text:g.ZP.UI.Cancel,onClick:()=>{t(!1),r()},icon:(0,o.jsx)(h.Z,{}),tabIndex:0,bordered:!0,shadow:!0},"cancel"),(0,o.jsx)(b.h,{text:g.ZP.UI.Confirm,type:"primary",onClick:()=>{t(!0),r()},icon:(0,o.jsx)(m.Z,{}),tabIndex:0,autoFocus:!0,bordered:!0,shadow:!0},"confirm")],onClose:r,children:e}))})}function T(e){var t;let[n,r]=(0,c.useState)(e.value),a=t=>{e.onChange(t),r(t)};return(0,o.jsx)("textarea",{className:i()["modal-input"],autoFocus:!0,value:n,onInput:e=>a(e.currentTarget.value),rows:null!==(t=e.rows)&&void 0!==t?t:3})}function P(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=document.createElement("div");r.className="modal-mask",document.body.appendChild(r);let a=(0,v.createRoot)(r),s=()=>{a.unmount(),r.remove()};return new Promise(r=>{let i=t;a.render((0,o.jsx)(x,{title:e,actions:[(0,o.jsx)(b.h,{text:g.ZP.UI.Cancel,onClick:()=>{s()},icon:(0,o.jsx)(h.Z,{}),bordered:!0,shadow:!0,tabIndex:0},"cancel"),(0,o.jsx)(b.h,{text:g.ZP.UI.Confirm,type:"primary",onClick:()=>{r(i),s()},icon:(0,o.jsx)(m.Z,{}),bordered:!0,shadow:!0,tabIndex:0},"confirm")],onClose:s,children:(0,o.jsx)(T,{onChange:e=>i=e,value:t,rows:n})}))})}function O(e){k({title:g.ZP.Export.Image.Modal,children:(0,o.jsx)("div",{children:(0,o.jsx)("img",{src:e,alt:"preview",style:{maxWidth:"100%"}})})})}},58058:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r={DR:{i:"2.9.2"}},a=n(62601);let o=()=>{var e;if(void 0===a)throw Error("[Server Config] you are importing a nodejs-only module outside of nodejs");let t=null!==(e=a.env.BUILD_MODE)&&void 0!==e?e:"standalone",o=!!a.env.BUILD_APP,s="v"+r.DR.i,i=(()=>{try{let e=n(68577),t=e.execSync('git log -1 --format="%at000" --date=unix').toString().trim(),r=e.execSync('git log --pretty=format:"%H" -n 1').toString().trim();return{commitDate:t,commitHash:r}}catch(e){return console.error("[Build Config] No git or not from git repo."),{commitDate:"unknown",commitHash:"unknown"}}})();return{version:s,...i,buildMode:t,isApp:o}};var s=n(62601);function i(){return"undefined"!=typeof document?JSON.parse(function(e,t){let n;if(document){var r;let t=document.head.querySelector("meta[name='".concat(e,"']"));n=null!==(r=null==t?void 0:t.content)&&void 0!==r?r:""}else n=null!=t?t:"";return n}("config")):void 0!==s?o():void 0}},29380:function(e,t,n){"use strict";var r,a,o,s,i,l,c,d,u,m,h,f,p,g,v,b,y,_;n.d(t,{Cs:function(){return E},DZ:function(){return m},Fk:function(){return M},Fv:function(){return R},I4:function(){return O},KJ:function(){return u},Ky:function(){return T},NQ:function(){return D},Sb:function(){return H},TE:function(){return j},TH:function(){return C},TW:function(){return Z},bH:function(){return I},cr:function(){return S},dJ:function(){return d},fC:function(){return s},kf:function(){return N},mX:function(){return W},nS:function(){return B},nV:function(){return P},o6:function(){return L},rg:function(){return A},tb:function(){return z},xf:function(){return U},y$:function(){return r},yY:function(){return F},ym:function(){return a},yp:function(){return G}});let w="Yidadaa",x="ChatGPT-Next-Web",k="https://github.com/".concat(w,"/").concat(x),C="https://github.com/".concat(w,"/").concat(x,"/issues"),E="".concat(k,"#keep-updated"),S="".concat(k,"/releases"),j="https://api.github.com/repos/".concat(w,"/").concat(x,"/commits?per_page=1"),M="https://api.github.com/repos/".concat(w,"/").concat(x,"/tags?per_page=1"),T="https://chatgpt1.nextweb.fun/api/proxy";(h=r||(r={})).Home="/",h.Chat="/chat",h.Settings="/settings",h.NewChat="/new-chat",h.Masks="/masks",h.Auth="/login",h.Login="/login",h.Number="/number",(a||(a={})).AppBody="app-body",(f=o||(o={})).register="register",f.findPassword="findPassword",(p=s||(s={})).bill="bill",p.pay="pay",p.promotion="promotion",p.inform="inform",(g=i||(i={})).chat="chat",g.openapiChat="openapiChat",g.QA="QA",g.vector="vector",g.return="return",(l||(l={})).system="system";let P={[i.chat]:"对话",[i.openapiChat]:"api 对话",[i.QA]:"QA拆分",[i.vector]:"索引生成",[i.return]:"退款"};(v=c||(c={})).invite="invite",v.shareModel="shareModel",v.withdraw="withdraw";let O={[c.invite]:"好友充值",[c.shareModel]:"应用分享",[c.withdraw]:"提现"};(b=d||(d={})).Masks="masks.json",b.Prompts="prompts.json",(y=u||(u={})).Chat="chat-next-web-store",y.Access="access-control",y.Config="app-config",y.Mask="mask-store",y.Prompt="prompt-store",y.Update="chat-update",y.Sync="sync",(_=m||(m={})).login="login",_.register="register",_.forgetPassword="forgetPassword";let N=500,D=230,I=100,A=1e5,Z="ak-",H="last-input",z=6e4,F="export-markdown",W={ChatPath:"chat/completions",UsagePath:"dashboard/billing/usage",SubsPath:"dashboard/billing/subscription",ListModelPath:"v1/models"},L={403:"登录状态无效,请重新登录"},U="{{input}}",G="\nYou are ChatGPT, a large language model trained by OpenAI.\nKnowledge cutoff: 2021-09\nCurrent model: {{model}}\nCurrent time: {{time}}",R=[{name:"gpt-4",available:!0},{name:"gpt-4-0314",available:!0},{name:"gpt-4-0613",available:!0},{name:"gpt-4-32k",available:!0},{name:"gpt-4-32k-0314",available:!0},{name:"gpt-4-32k-0613",available:!0},{name:"gpt-3.5-turbo",available:!0},{name:"gpt-3.5-turbo-0301",available:!0},{name:"gpt-3.5-turbo-0613",available:!0},{name:"gpt-3.5-turbo-16k",available:!0},{name:"gpt-3.5-turbo-16k-0613",available:!0}],B=15},24351:function(e,t,n){"use strict";n.d(t,{p:function(){return a}});var r=n(35606);let a=e=>{let t=(0,r.p)({position:"top",duration:2e3,...e});return{toast:t}}},48718:function(e,t,n){"use strict";n.d(t,{nW:function(){return i},DC:function(){return s},t4:function(){return m},ZP:function(){return d},VQ:function(){return u}});var r=n(47241),a={WIP:"该功能仍在开发中……",Error:{Unauthorized:"访问密码不正确或为空，请前往[登录](/#/login)页输入正确的访问密码，或者在[设置](/#/settings)页填入你自己的 OpenAI API Key。"},Auth:{Title:"需要密码",Tips:"管理员开启了密码验证，请在下方填入访问码",Input:"在此处填写访问码",Confirm:"确认",Later:"稍后再说"},ChatItem:{ChatItemCount:e=>"".concat(e," 条对话")},Chat:{SubTitle:e=>"共 ".concat(e," 条对话"),EditMessage:{Title:"编辑消息记录",Topic:{Title:"聊天主题",SubTitle:"更改当前聊天主题"}},Actions:{ChatList:"查看消息列表",CompressedHistory:"查看压缩后的历史 Prompt",Export:"导出聊天记录",Copy:"复制",Stop:"停止",Retry:"重试",Pin:"固定",PinToastContent:"已将 1 条对话固定至预设提示词",PinToastAction:"查看",Delete:"删除",Edit:"编辑"},Commands:{new:"新建聊天",newm:"从面具新建聊天",next:"下一个聊天",prev:"上一个聊天",clear:"清除上下文",del:"删除聊天"},InputActions:{Stop:"停止响应",ToBottom:"滚到最新",Theme:{auto:"自动主题",light:"亮色模式",dark:"深色模式"},Prompt:"快捷指令",Masks:"所有面具",Clear:"清除聊天",Settings:"对话设置"},Rename:"重命名对话",Typing:"正在输入…",Input:e=>{var t="".concat(e," 发送");return e===String(r.mQ.Enter)&&(t+="，Shift + Enter 换行"),t+"，/ 触发补全，: 触发命令"},Send:"发送",Config:{Reset:"清除记忆",SaveAs:"存为面具"},IsContext:"预设提示词"},Export:{Title:"分享聊天记录",Copy:"全部复制",Download:"下载文件",Share:"分享到 ShareGPT",MessageFromYou:"来自你的消息",MessageFromChatGPT:"来自 ChatGPT 的消息",Format:{Title:"导出格式",SubTitle:"可以导出 Markdown 文本或者 PNG 图片"},IncludeContext:{Title:"包含面具上下文",SubTitle:"是否在消息中展示面具上下文"},Steps:{Select:"选取",Preview:"预览"},Image:{Toast:"正在生成截图",Modal:"长按或右键保存图片"}},Select:{Search:"搜索消息",All:"选取全部",Latest:"最近几条",Clear:"清除选中"},Memory:{Title:"历史摘要",EmptyContent:"对话内容过短，无需总结",Send:"自动压缩聊天记录并作为上下文发送",Copy:"复制摘要",Reset:"[unused]",ResetConfirm:"确认清空历史摘要？"},Home:{NewChat:"新的聊天",DeleteChat:"确认删除选中的对话？",DeleteToast:"已删除会话",Revert:"撤销"},Settings:{Title:"设置",SubTitle:"所有设置选项",Danger:{Reset:{Title:"重置所有设置",SubTitle:"重置所有设置项回默认值",Action:"立即重置",Confirm:"确认重置所有设置？"},Clear:{Title:"清除所有数据",SubTitle:"清除所有聊天、设置数据",Action:"立即清除",Confirm:"确认清除所有聊天、设置数据？"}},Lang:{Name:"Language",All:"所有语言"},Avatar:"头像",Username:"账号",Balance:"余额",FontSize:{Title:"字体大小",SubTitle:"聊天内容的字体大小"},InjectSystemPrompts:{Title:"注入系统级提示信息",SubTitle:"强制给每次请求的消息列表开头添加一个模拟 ChatGPT 的系统提示"},InputTemplate:{Title:"用户输入预处理",SubTitle:"用户最新的一条消息会填充到此模板"},Update:{Version:e=>"当前版本：".concat(e),IsLatest:"已是最新版本",CheckUpdate:"检查更新",IsChecking:"正在检查更新...",FoundUpdate:e=>"发现新版本：".concat(e),GoToUpdate:"前往更新"},SendKey:"发送键",Theme:"主题",TightBorder:"无边框模式",SendPreviewBubble:{Title:"预览气泡",SubTitle:"在预览气泡中预览 Markdown 内容"},Mask:{Splash:{Title:"面具启动页",SubTitle:"新建聊天时，展示面具启动页"},Builtin:{Title:"隐藏内置面具",SubTitle:"在所有面具列表中隐藏内置面具"}},Prompt:{Disable:{Title:"禁用提示词自动补全",SubTitle:"在输入框开头输入 / 即可触发自动补全"},List:"自定义提示词列表",ListCount:(e,t)=>"内置 ".concat(e," 条，用户定义 ").concat(t," 条"),Edit:"编辑",Modal:{Title:"提示词列表",Add:"新建",Search:"搜索提示词"},EditModal:{Title:"编辑提示词"}},HistoryCount:{Title:"附带历史消息数",SubTitle:"每次请求携带的历史消息数"},CompressThreshold:{Title:"历史消息长度压缩阈值",SubTitle:"当未压缩的历史消息超过该值时，将进行压缩"},Token:{Title:"API Key",SubTitle:"使用自己的 Key 可绕过密码访问限制",Placeholder:"OpenAI API Key"},Usage:{Title:"余额查询",SubTitle:(e,t)=>"本月已使用 $".concat(e,"，订阅总额 $").concat(t),IsChecking:"正在检查…",Check:"重新检查",NoAccess:"输入 API Key 或访问密码查看余额"},AccessCode:{Title:"访问密码",SubTitle:"管理员已开启加密访问",Placeholder:"请输入访问密码"},Endpoint:{Title:"接口地址",SubTitle:"除默认地址外，必须包含 http(s)://"},CustomModel:{Title:"自定义模型名",SubTitle:"增加自定义模型可选项，使用英文逗号隔开"},Model:"模型 (model)",Temperature:{Title:"随机性 (temperature)",SubTitle:"值越大，回复越随机"},TopP:{Title:"核采样 (top_p)",SubTitle:"与随机性类似，但不要和随机性一起更改"},MaxTokens:{Title:"单次回复限制 (max_tokens)",SubTitle:"单次交互所用的最大 Token 数"},PresencePenalty:{Title:"话题新鲜度 (presence_penalty)",SubTitle:"值越大，越有可能扩展到新话题"},FrequencyPenalty:{Title:"频率惩罚度 (frequency_penalty)",SubTitle:"值越大，越有可能降低重复字词"}},Store:{DefaultTopic:"新的聊天",BotHello:"有什么可以帮你的吗",Error:"出错了，稍后重试吧",Prompt:{History:e=>"这是历史聊天总结作为前情提要："+e,Topic:"使用四到五个字直接返回这句话的简要主题，不要解释、不要标点、不要语气词、不要多余文本，如果没有主题，请直接返回“闲聊”",Summarize:"简要总结一下对话内容，用作后续的上下文提示 prompt，控制在 200 字以内"}},Copy:{Success:"已写入剪切板",Failed:"复制失败，请赋予剪切板权限"},Context:{Toast:e=>"包含 ".concat(e," 条预设提示词"),Edit:"当前对话设置",Add:"新增一条对话",Clear:"上下文已清除",Revert:"恢复上下文"},Plugin:{Name:"插件"},Mask:{Name:"面具",Page:{Title:"预设角色面具",SubTitle:e=>"".concat(e," 个预设角色定义"),Search:"搜索角色面具",Create:"新建"},Item:{Info:e=>"包含 ".concat(e," 条预设对话"),Chat:"对话",View:"查看",Edit:"编辑",Delete:"删除",DeleteConfirm:"确认删除？"},EditModal:{Title:e=>"编辑预设面具 ".concat(e?"（只读）":""),Download:"下载预设",Clone:"克隆预设"},Config:{Avatar:"角色头像",Name:"角色名称",Sync:{Title:"使用全局设置",SubTitle:"当前对话是否使用全局模型设置",Confirm:"当前对话的自定义设置将会被自动覆盖，确认启用全局设置？"},HideContext:{Title:"隐藏预设对话",SubTitle:"隐藏后预设对话不会出现在聊天界面"},Share:{Title:"分享此面具",SubTitle:"生成此面具的直达链接",Action:"复制链接"}}},NewChat:{Return:"返回",Skip:"直接开始",NotShow:"不再展示",ConfirmNoShow:"确认禁用？禁用后可以随时在设置中重新启用。",Title:"挑选一个面具",SubTitle:"现在开始，与面具背后的灵魂思维碰撞",More:"查看全部"},URLCommand:{Code:"检测到链接中已经包含访问码，是否自动填入？",Settings:"检测到链接中包含了预制设置，是否自动填入？"},UI:{Confirm:"确认",Cancel:"取消",Close:"关闭",Create:"新建",Edit:"编辑"},Exporter:{Model:"模型",Messages:"消息",Topic:"主题",Time:"时间"}};let o={cn:a},s=Object.keys(o),i={cn:"简体中文"},l="lang",c=o[u()];!function e(t,n){Object.keys(n).forEach(function(r){if(n[r]&&"object"==typeof n[r]){e(t[r]=t[r]||{},n[r]);return}t[r]=n[r]})}(a,c);var d=a;function u(){let e=function(e){try{return localStorage.getItem(e)}catch(e){return null}}(l);if(s.includes(null!=e?e:""))return e;let t=function(){try{return navigator.language.toLowerCase()}catch(e){return"cn"}}();for(let e of s)if(t.includes(e))return e;return"cn"}function m(e){!function(e,t){try{localStorage.setItem(e,t)}catch(e){}}(l,e),location.reload()}},31865:function(e,t,n){"use strict";n.d(t,{hJ:function(){return a},$n:function(){return r}});let r={buildinId:1e5,masks:{},get(e){if(e)return this.masks[e]},add(e){let t={...e,id:this.buildinId++,builtin:!0};return this.masks[t.id]=t,t}},a=[].map(e=>r.add(e))},92982:function(e,t,n){"use strict";n.r(t),Array.prototype.at||(Array.prototype.at=function(e){let t=this.length;if(e<0&&(e=t+e),!(e<0)&&!(e>=t))return Array.prototype.slice.call(this,e,e+1)[0]})},89038:function(e,t,n){"use strict";n.d(t,{HX:function(){return b},tn:function(){return v},aK:function(){return x}});var r=n(94660),a=n(74810),o=n(74709),s=n(13130),i=n(48718),l=n(26537),c=n(47241),d=n(1229),u=n(29380),m=n(19035),h=n(48183),f=n(27134);function p(e){let t=0;for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);r<128?r<=122&&r>=65?t+=.25:t+=.5:t+=1.5}return t}var g=n(28481);function v(e){return{_id:String(new s.Types.ObjectId),role:"user",content:"",date:""}}let b=i.ZP.Store.DefaultTopic;function y(){return{_id:String(new s.Types.ObjectId),topic:b,memoryPrompt:"",messages:[],stat:{tokenCount:0,wordCount:0,charCount:0},lastUpdate:Date.now(),lastSummarizeIndex:0,mask:(0,d.Yc)()}}function _(e){return e.reduce((e,t)=>e+p(t.content),0)}function w(e,t){var n;let r={model:t.model,time:new Date().toLocaleString(),lang:(0,i.VQ)(),input:e},a=null!==(n=t.template)&&void 0!==n?n:u.xf,o="{{input}}";return a.includes(o)||(a+="\n"+o),Object.entries(r).forEach(e=>{let[t,n]=e;a=a.replaceAll("{{".concat(t,"}}"),n)}),a}v({role:"assistant",content:i.ZP.Store.BotHello});let x=(0,r.Ue)()((0,a.tJ)((e,t)=>({sessions:[y()],currentSessionIndex:0,clearSessions(){e(()=>({sessions:[y()],currentSessionIndex:0}))},selectSession(t){e({currentSessionIndex:t})},moveSession(t,n){e(e=>{let{sessions:r,currentSessionIndex:a}=e,o=[...r],s=o[t];o.splice(t,1),o.splice(n,0,s);let i=a===t?n:a;return a>t&&a<=n?i-=1:a<t&&a>=n&&(i+=1),{currentSessionIndex:i,sessions:o}})},newSession(t){let n=y();if(t){let e=c.MG.getState(),r=e.modelConfig;n.mask={...t,modelConfig:{...r,...t.modelConfig}},n.topic=t.name}e(e=>({currentSessionIndex:0,sessions:[n].concat(e.sessions)}))},nextSession(e){let n=t().sessions.length,r=t().currentSessionIndex;t().selectSession((r+e+n)%n)},deleteSession(n){let r=1===t().sessions.length,a=t().sessions.at(n);if(!a)return;let o=t().sessions.slice();o.splice(n,1);let s=t().currentSessionIndex,c=Math.min(s-Number(n<s),o.length-1);r&&(c=0,o.push(y()));let d={currentSessionIndex:t().currentSessionIndex,sessions:t().sessions.slice()};e(()=>({currentSessionIndex:c,sessions:o})),(0,l.CF)(i.ZP.Home.DeleteToast,{text:i.ZP.Home.Revert,onClick(){e(()=>d)}},5e3)},currentSession(){let n=t().currentSessionIndex,r=t().sessions;(n<0||n>=r.length)&&(n=Math.min(r.length-1,Math.max(0,n)),e(()=>({currentSessionIndex:n})));let a=r[n];return a},onNewMessage(e){t().updateCurrentSession(e=>{e.messages=e.messages.concat(),e.lastUpdate=Date.now()}),t().updateStat(e),t().summarizeSession()},async onUserInput(e){let n=t().currentSession(),r=n.mask.modelConfig,{_id:a}=n.mask||{},o=w(e,r);console.log("[User Input] after template: ",o);let s=v({role:"user",content:o}),i=v({role:"assistant",streaming:!0}),l=t().getMessagesWithMemory(),c=l.concat(s),d=t().currentSession().messages.length+1;t().updateCurrentSession(t=>{var n;let r={...s,content:e};t.messages=null==t?void 0:null===(n=t.messages)||void 0===n?void 0:n.concat([r,i])}),m.hi.llm.chat({messages:c,config:{stream:!0,appId:a,model:"",chatId:""},onUpdate(e){i.streaming=!0,e&&(i.content=e),t().updateCurrentSession(e=>{e.messages=e.messages.concat()})},onFinish(e){i.streaming=!1,e&&(i.content=e,t().onNewMessage(i)),h.L.remove(n._id,i._id)},onError(e){var r;e.message.includes("aborted"),i.content+="\n\n"+(0,f.B)({error:!0,message:e.message}),i.streaming=!1,t().updateCurrentSession(e=>{e.messages=e.messages.concat()}),h.L.remove(n._id,null!==(r=i._id)&&void 0!==r?r:d),console.error("[Chat] failed ",e)},onController(e){var t;h.L.addController(n._id,null!==(t=i._id)&&void 0!==t?t:d,e)}})},getMemoryPrompt(){let e=t().currentSession();return{role:"system",content:e.memoryPrompt.length>0?i.ZP.Store.Prompt.History(e.memoryPrompt):""}},getMessagesWithMemory(){var e,n,r,a,o;let s=t().currentSession(),i=s.mask.modelConfig,l=null!==(r=s.clearContextIndex)&&void 0!==r?r:0,c=null==s?void 0:null===(e=s.messages)||void 0===e?void 0:e.slice(),d=null==s?void 0:null===(n=s.messages)||void 0===n?void 0:n.length,m=i.enableInjectSystemPrompts,h=m?[v({role:"system",content:w("",{...i,template:u.yp})})]:[];m&&console.log("[Global System Prompt] ",null!==(o=null===(a=h.at(0))||void 0===a?void 0:a.content)&&void 0!==o?o:"empty");let f=i.sendMemory&&s.memoryPrompt&&s.memoryPrompt.length>0&&s.lastSummarizeIndex>l,g=f?[t().getMemoryPrompt()]:[],b=s.lastSummarizeIndex,y=Math.max(0,d-i.historyMessageCount),_=Math.max(l,f?Math.min(b,y):y),x=i.max_tokens,k=[];for(let e=d-1,t=0;e>=_&&t<x;e-=1){let n=c[e];n&&(t+=p(n.content),k.push(n))}let C=[...h,...g,...k.reverse()];return C},updateMessage(n,r,a){let o=t().sessions,s=o.at(n),i=null==s?void 0:s.messages;a(null==i?void 0:i.at(r)),e(()=>({sessions:o}))},resetSession(){t().updateCurrentSession(e=>{e.messages=[],e.memoryPrompt=""})},summarizeSession(){var e,n;let r=t().currentSession(),a=r.messages;if(r.topic===b&&_(a)>=50){let e=a.concat(v({role:"user",content:i.ZP.Store.Prompt.Topic}));m.hi.llm.chat({messages:e,config:{model:"gpt-3.5-turbo",appId:"",chatId:""},onFinish(e){t().updateCurrentSession(t=>t.topic=e.length>0?(0,o.ez)(e):b)}})}let s=r.mask.modelConfig,l=Math.max(r.lastSummarizeIndex,null!==(e=r.clearContextIndex)&&void 0!==e?e:0),c=a.slice(l),d=_(c);if(d>(null==s?void 0:s.max_tokens)){let e=c.length;c=c.slice(Math.max(0,e-s.historyMessageCount))}c.unshift(t().getMemoryPrompt());let u=r.messages.length;console.log("[Chat History] ",c,d,s.compressMessageLengthThreshold),d>s.compressMessageLengthThreshold&&s.sendMemory&&m.hi.llm.chat({messages:c.concat(v({role:"system",content:i.ZP.Store.Prompt.Summarize})),config:{...s,stream:!0,model:"gpt-3.5-turbo",appId:"",chatId:""},onUpdate(e){r.memoryPrompt=e},onFinish(e){console.log("[Memory] ",e),r.lastSummarizeIndex=u},onError(e){console.error("[Summarize] ",e)}})},updateStat(e){t().updateCurrentSession(t=>{t.stat.charCount+=e.content.length})},updateCurrentSession(n){let r=t().sessions,a=t().currentSessionIndex;n(r[a]),e(()=>({sessions:r}))},clearAllData(){localStorage.clear(),location.reload()}}),{name:u.KJ.Chat,version:3.1,migrate(e,t){let n=JSON.parse(JSON.stringify(e));if(t<2){n.sessions=[];let t=e.sessions;for(let e of t){let t=y();t.topic=e.topic,t.messages=[...e.messages],t.mask.modelConfig.sendMemory=!0,t.mask.modelConfig.historyMessageCount=4,t.mask.modelConfig.compressMessageLengthThreshold=1e3,n.sessions.push(t)}}return t<3&&n.sessions.forEach(e=>{e._id=(0,g.x0)(),e.messages.forEach(e=>e._id=(0,g.x0)())}),t<3.1&&n.sessions.forEach(e=>{if(!e.mask.modelConfig.hasOwnProperty("enableInjectSystemPrompts")){let t=c.MG.getState();e.mask.modelConfig.enableInjectSystemPrompts=t.modelConfig.enableInjectSystemPrompts}}),n}}))},47241:function(e,t,n){"use strict";n.d(t,{MG:function(){return p},Q2:function(){return i},Xm:function(){return f},mQ:function(){return s}});var r,a,o,s,i,l=n(94660),c=n(74810),d=n(58058),u=n(29380);(r=s||(s={})).Enter="Enter",r.CtrlEnter="Ctrl + Enter",r.ShiftEnter="Shift + Enter",r.AltEnter="Alt + Enter",r.MetaEnter="Meta + Enter",(a=i||(i={})).Auto="auto",a.Dark="dark",a.Light="light";let m={submitKey:s.CtrlEnter,avatar:"1f603",fontSize:14,theme:i.Auto,tightBorder:!!(null===(o=(0,d.Z)())||void 0===o?void 0:o.isApp),sendPreviewBubble:!0,sidebarWidth:300,disablePromptHint:!1,dontShowMaskSplashScreen:!1,hideBuiltinMasks:!1,customModels:"",models:u.Fv,modelConfig:{model:"gpt-3.5-turbo",temperature:.5,top_p:1,max_tokens:2e3,presence_penalty:0,frequency_penalty:0,sendMemory:!0,historyMessageCount:4,compressMessageLengthThreshold:1e3,enableInjectSystemPrompts:!0,template:u.xf}};function h(e,t,n,r){return"number"!=typeof e||isNaN(e)?r:Math.min(n,Math.max(t,e))}let f={model:e=>e,max_tokens:e=>h(e,0,1e5,2e3),presence_penalty:e=>h(e,-2,2,0),frequency_penalty:e=>h(e,-2,2,0),temperature:e=>h(e,0,1,1),top_p:e=>h(e,0,1,1)},p=(0,l.Ue)()((0,c.tJ)((e,t)=>({...m,reset(){e(()=>({...m}))},update(n){let r={...t()};n(r),e(()=>r)},mergeModels(n){if(!n||0===n.length)return;let r=t().models,a={};for(let e of r)e.available=!1,a[e.name]=e;for(let e of n)e.available=!0,a[e.name]=e;e(()=>({models:Object.values(a)}))},allModels(){let e=t().customModels.split(",").filter(e=>!!e&&e.length>0).map(e=>({name:e,available:!0})),n=t().models.concat(e);return n}}),{name:u.KJ.Config,version:3.6,migrate:(e,t)=>(t<3.4&&(e.modelConfig.sendMemory=!0,e.modelConfig.historyMessageCount=4,e.modelConfig.compressMessageLengthThreshold=1e3,e.modelConfig.frequency_penalty=0,e.modelConfig.top_p=1,e.modelConfig.template=u.xf,e.dontShowMaskSplashScreen=!1,e.hideBuiltinMasks=!1),t<3.5&&(e.customModels="claude,claude-100k"),t<3.6&&(e.modelConfig.enableInjectSystemPrompts=!0),e)}))},78566:function(e,t,n){"use strict";n.d(t,{HX:function(){return a.HX},Xm:function(){return p.Xm},mQ:function(){return p.mQ},Q2:function(){return p.Q2},tn:function(){return a.tn},_X:function(){return f},MG:function(){return p.MG},aK:function(){return a.aK},u2:function(){return u}});var r,a=n(89038),o=n(94660),s=n(74810),i=n(29380),l=n(19035),c=n(58058);async function d(e){if("date"===e){let e=await (await fetch(i.TE)).json(),t=e[0].commit.author.date,n=new Date(t).getTime().toString();return n}if("tag"===e){var t;let e=await (await fetch(i.Fk)).json();return null===(t=e.at(0))||void 0===t?void 0:t.name}}let u=(0,o.Ue)()((0,s.tJ)((e,t)=>({versionType:"tag",lastUpdate:0,version:"unknown",remoteVersion:"",lastUpdateUsage:0,formatVersion:e=>("date"===t().versionType&&(e=function(e){let t=new Date(+e),n=t.getUTCFullYear(),r=t.getUTCMonth()+1,a=t.getUTCDate();return[n.toString(),r.toString().padStart(2,"0"),a.toString().padStart(2,"0")].join("")}(e)),e),async getLatestVersion(){var n,r;let a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=t().versionType,s="date"===o?null===(n=(0,c.Z)())||void 0===n?void 0:n.commitDate:null===(r=(0,c.Z)())||void 0===r?void 0:r.version;e(()=>({version:s}));let i=Date.now()-t().lastUpdate>72e5;if(a||i){e(()=>({lastUpdate:Date.now()}));try{let t=await d(o);e(()=>({remoteVersion:t})),console.log("[Got Upstream] ",t)}catch(e){console.error("[Fetch Upstream Commit Id]",e)}}},async updateUsage(){let n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=Date.now()-t().lastUpdateUsage>=6e4;if(r||n){e(()=>({lastUpdateUsage:Date.now()}));try{let t=await l.hi.llm.usage();t&&e(()=>({used:t.used,subscription:t.total}))}catch(e){console.error(e.message)}}}}),{name:i.KJ.Update,version:1})),m=0,h=(null===(r=(0,c.Z)())||void 0===r?void 0:r.buildMode)==="export"?i.Ky:"/api/openapi/";console.log("[API] default openai url",h);let f=(0,o.Ue)()((0,s.tJ)((e,t)=>({_id:"",token:"",accessCode:"",avatar:"",balance:0,createTime:0,username:"",needCode:!0,hideUserApiKey:!1,hideBalanceQuery:!1,disableGPT4:!1,openaiUrl:h,enabledAccessControl:()=>(t().fetch(),t().needCode),updateCode(t){e(()=>({accessCode:null==t?void 0:t.trim()}))},updateToken(t){e(()=>({token:null==t?void 0:t.trim()}))},updateOpenAiUrl(t){e(()=>({openaiUrl:null==t?void 0:t.trim()}))},isAuthorized:()=>(t().fetch(),!!t().token||!!t().accessCode||!t().enabledAccessControl()),fetch(){var t;m>0||(null===(t=(0,c.Z)())||void 0===t?void 0:t.buildMode)==="export"||(m=1,fetch("/api/user/tokenLogin",{method:"get",body:null,headers:{...(0,l.wU)()}}).then(e=>e.json()).then(t=>{let n=null==t?void 0:t.data;if((null==t?void 0:t.code)in i.o6){window.location.replace("/#/login");return}e(()=>({...n}))}).catch(()=>{console.error("[Config] failed to fetch config")}).finally(()=>{m=2}))}}),{name:i.KJ.Access,version:1}));var p=n(47241)},1229:function(e,t,n){"use strict";n.d(t,{Yc:function(){return h},Zy:function(){return f},_G:function(){return m}});var r=n(94660),a=n(74810),o=n(31865),s=n(48718),i=n(89038),l=n(47241),c=n(29380),d=n(28481);let u={masks:{}},m="gpt-bot",h=()=>({_id:(0,d.x0)(),avatar:m,name:i.HX,context:[],syncGlobalConfig:!0,modelConfig:{...l.MG.getState().modelConfig},lang:(0,s.VQ)(),builtin:!1,createdAt:Date.now()}),f=(0,r.Ue)()((0,a.tJ)((e,t)=>({...u,create(n){let r=t().masks,a=(0,d.x0)();return r[a]={...h(),...n,_id:a,builtin:!1},e(()=>({masks:r})),r[a]},update(n,r){let a=t().masks,o=a[n];if(!o)return;let s={...o};r(s),a[n]=s,e(()=>({masks:a}))},delete(n){let r=t().masks;delete r[n],e(()=>({masks:r}))},get:e=>t().masks[null!=e?e:1145141919810],getAll(){let e=Object.values(t().masks).sort((e,t)=>t.createdAt-e.createdAt),n=l.MG.getState();if(n.hideBuiltinMasks)return e;let r=o.hJ.map(e=>({...e,modelConfig:{...n.modelConfig,...e.modelConfig}}));return e.concat(r)},search:e=>Object.values(t().masks)}),{name:c.KJ.Mask,version:3.1,migrate(e,t){let n=JSON.parse(JSON.stringify(e));if(t<3&&Object.values(n.masks).forEach(e=>e._id=(0,d.x0)()),t<3.1){let e={};Object.values(n.masks).forEach(t=>{e[t._id]=t}),n.masks=e}return n}}))},62460:function(e,t,n){"use strict";n.d(t,{r:function(){return g}});var r=n(50446),a=n(39624),o=n(8690);let{definePartsStyle:s,defineMultiStyleConfig:i}=(0,r.D)(o.wl.keys),{definePartsStyle:l,defineMultiStyleConfig:c}=(0,r.D)(o.ke.keys),{definePartsStyle:d,defineMultiStyleConfig:u}=(0,r.D)(o.nY.keys),m=i({baseStyle:s({dialog:{}})}),h=(0,r.fj)({baseStyle:{_active:{transform:"scale(0.98)"}},sizes:{xs:{fontSize:"xs",px:3,py:0,fontWeight:"normal",height:"22px",borderRadius:"2px"},sm:{fontSize:"sm",px:4,py:0,fontWeight:"normal",height:"26px",borderRadius:"2px"},md:{fontSize:"md",px:6,py:0,height:"32px",fontWeight:"normal",borderRadius:"4px"},lg:{fontSize:"lg",px:8,py:0,height:"42px",fontWeight:"normal",borderRadius:"8px"}},variants:{primary:{backgroundImage:"linear-gradient(to bottom right, #2152d9 0%,#3370ff 40%, #4e83fd 100%) !important",color:"white",border:"none",_hover:{filter:"brightness(115%)"},_disabled:{bg:"#3370ff !important"}},base:{color:"myGray.900",border:"1px solid",borderColor:"myGray.200",bg:"transparent",transition:"background 0.3s",_hover:{color:"myBlue.600",bg:"myWhite.400"},_active:{color:"myBlue.700"},_disabled:{bg:"myGray.100 !important",color:"myGray.700 !important"}}},defaultProps:{size:"md",variant:"primary"}}),f=c({baseStyle:l({track:{bg:"myGray.100",_checked:{bg:"myBlue.700"}}})}),p=u({variants:{outline:d({field:{borderColor:"myGray.100",_focusWithin:{boxShadow:"0px 0px 4px #A8DBFF",borderColor:"myBlue.600"}}})}}),g=(0,a.B1)({styles:{global:{"html, body":{color:"myGray.900",fontSize:"md",fontWeight:400,height:"100%",overflow:"hidden"},a:{color:"myBlue.700"}}},colors:{myWhite:{100:"#FEFEFE",200:"#FDFDFE",300:"#FBFBFC",400:"#F8FAFB",500:"#F6F8F9",600:"#F4F6F8",700:"#C3C5C6",800:"#929495",900:"#626263",1e3:"#313132"},myGray:{100:"#EFF0F1",200:"#DEE0E2",300:"#BDC1C5",400:"#9CA2A8",500:"#7B838B",600:"#5A646E",700:"#485058",800:"#363C42",900:"#24282C",1e3:"#121416"},myBlue:{100:"#f0f7ff",200:"#EBF7FD",300:"#d6e8ff",400:"#adceff",500:"#85b1ff",600:"#4e83fd",700:"#3370ff",800:"#2152d9",900:"#1237b3",1e3:"#07228c"},myRead:{600:"#ff4d4f"}},fonts:{body:'-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"'},fontSizes:{xs:"10px",sm:"12px",md:"14px",lg:"16px",xl:"16px","2xl":"18px","3xl":"20px"},borders:{sm:"1px solid #EFF0F1",base:"1px solid #DEE0E2",md:"1px solid #BDC1C5"},breakpoints:{sm:"900px",md:"1200px",lg:"1500px",xl:"1800px","2xl":"2100px"},lgColor:{activeBlueGradient:"linear-gradient(to bottom right, #d6e8ff 0%, #f0f7ff 100%)",hoverBlueGradient:"linear-gradient(to top left, #d6e8ff 0%, #f0f7ff 100%)",primary:"linear-gradient(to bottom right, #2152d9 0%,#3370ff 40%, #4e83fd 100%)",primary2:"linear-gradient(to bottom right, #2152d9 0%,#3370ff 30%,#4e83fd 80%, #85b1ff 100%)"},components:{Modal:m,Button:h,Input:{baseStyle:{},variants:{outline:{field:{backgroundColor:"transparent",border:"1px solid",borderRadius:"base",borderColor:"myGray.200",_focus:{borderColor:"myBlue.600",boxShadow:"0px 0px 4px #A8DBFF",bg:"white"},_disabled:{color:"myGray.400",bg:"myWhite.300"}}}},defaultProps:{size:"md",variant:"outline"}},Textarea:{variants:{outline:{border:"1px solid",borderRadius:"base",borderColor:"myGray.200",_focus:{borderColor:"myBlue.600",boxShadow:"0px 0px 4px #A8DBFF"}}},defaultProps:{size:"md",variant:"outline"}},Switch:f,Select:p}})},74709:function(e,t,n){"use strict";n.d(t,{CP:function(){return l},K1:function(){return f},Ri:function(){return u},S0:function(){return d},ez:function(){return s},j2:function(){return c},lx:function(){return h},vQ:function(){return i}});var r=n(2265),a=n(26537),o=n(48718);function s(e){return e.replace(/[，。！？”“"、,.!?]*$/,"")}async function i(e){try{window.__TAURI__?window.__TAURI__.writeText(e):await navigator.clipboard.writeText(e),(0,a.CF)(o.ZP.Copy.Success)}catch(n){let t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy"),(0,a.CF)(o.ZP.Copy.Success)}catch(e){(0,a.CF)(o.ZP.Copy.Failed)}document.body.removeChild(t)}}function l(e,t){let n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),n.setAttribute("download",t),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}function c(){return new Promise((e,t)=>{let n=document.createElement("input");n.type="file",n.accept="application/json",n.onchange=n=>{let r=n.target.files[0],a=new FileReader;a.onload=t=>{e(t.target.result)},a.onerror=e=>t(e),a.readAsText(r)},n.click()})}function d(){let{width:e}=function(){let[e,t]=(0,r.useState)({width:window.innerWidth,height:window.innerHeight});return(0,r.useEffect)(()=>{let e=()=>{t({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),e}();return e<=600}function u(e,t){let n=window.getSelection();return(null==n?void 0:n.type)!=="Range"&&(i(t),!0)}function m(e,t){let n=document.getElementById(e);return n||((n=document.createElement("span")).style.position="absolute",n.style.wordBreak="break-word",n.style.fontSize="14px",n.style.transform="translateY(-200vh)",n.style.pointerEvents="none",n.style.opacity="0",n.id=e,document.body.appendChild(n),null==t||t(n)),n}function h(e){let t=m("__measure"),n=m("__single_measure",e=>{e.innerText="TEXT_FOR_MEASURE"}),r=function(e){let t=window.getComputedStyle(e),n=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight),r=e.clientWidth-n;return r}(e);t.style.width=r+"px",t.innerText=""!==e.value?e.value:"1",t.style.fontSize=e.style.fontSize;let a=e.value.endsWith("\n"),o=parseFloat(window.getComputedStyle(t).height),s=parseFloat(window.getComputedStyle(n).height);return Math.round(o/s)+(a?1:0)}function f(e){return getComputedStyle(document.body).getPropertyValue(e).trim()}},27134:function(e,t,n){"use strict";function r(e){let t=e;return("string"!=typeof e&&(e=JSON.stringify(e,null,"  ")),"{}"===e)?t.toString():e.startsWith("```json")?e:["```json",e,"```"].join("\n")}n.d(t,{B:function(){return r}})},24101:function(e,t,n){"use strict";n.d(t,{T4:function(){return p},V4:function(){return f},Z5:function(){return u},iO:function(){return h},ij:function(){return m}});var r=n(74548),a=n.n(r),o=n(24351),s=n(54519),i=n.n(s),l=n(76217),c=n.n(l),d=n(29380);let u=()=>{let{toast:e}=(0,o.p)();return{copyData:async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"复制成功";try{if(navigator.clipboard)await navigator.clipboard.writeText(t);else throw Error("")}catch(n){let e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}e({title:n,status:"success",duration:1e3})}}},m=e=>{let t=i()(e);return c().stringify(t)},h=e=>{let t=new URLSearchParams;for(let n in e)t.append(n,"".concat(e[n]));return t.toString()},f=e=>{let t=a()(),n=a()(e);return 60>t.diff(n,"second")?"刚刚":t.isSame(n,"day")?n.format("HH:mm"):t.subtract(1,"day").isSame(n,"day")?"昨天":t.subtract(2,"day").isSame(n,"day")?"前天":t.isSame(n,"year")?n.format("M月D日"):n.format("YYYY/M/D")};window;let p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Number((e/d.rg*t).toFixed(10))}},61578:function(e){e.exports={"icon-button":"button_icon-button__VwAMf",primary:"button_primary__dwYZ6",danger:"button_danger__aE7By",shadow:"button_shadow__G4m_0",border:"button_border__F3gcK","icon-button-icon":"button_icon-button-icon__AMZta","icon-button-text":"button_icon-button-text__my76e"}},82532:function(e){e.exports={container:"home_container__4PEJZ","tight-container":"home_tight-container__ztaM7",sidebar:"home_sidebar__fPZfq","sidebar-header-bar":"home_sidebar-header-bar__SVjIN","sidebar-bar-button":"home_sidebar-bar-button__zJdvw","sidebar-drag":"home_sidebar-drag__G9SJI","window-content":"home_window-content__2WGYf",mobile:"home_mobile__Wfp_k","sidebar-show":"home_sidebar-show__9bQfu","sidebar-header":"home_sidebar-header___NHg_","sidebar-logo":"home_sidebar-logo__Cd7hL","sidebar-title":"home_sidebar-title__l3KhW","slide-in":"home_slide-in__h1Bn_","sidebar-sub-title":"home_sidebar-sub-title__sbT6Z","sidebar-body":"home_sidebar-body__9zbei","chat-item":"home_chat-item__Oblai","chat-item-selected":"home_chat-item-selected__b6eBe","chat-item-title":"home_chat-item-title__sRstw","chat-item-delete":"home_chat-item-delete__3qV5m","chat-item-info":"home_chat-item-info__9r6z_","chat-item-count":"home_chat-item-count____Lpy","chat-item-date":"home_chat-item-date__NOFrp","narrow-sidebar":"home_narrow-sidebar__SFIXN","chat-item-narrow":"home_chat-item-narrow__Kd4e0","chat-item-avatar":"home_chat-item-avatar__KJu_J","chat-item-narrow-count":"home_chat-item-narrow-count__B3b3g","sidebar-tail":"home_sidebar-tail__T2_u7","sidebar-actions":"home_sidebar-actions__LcDT9","sidebar-action":"home_sidebar-action__IVfyJ","loading-content":"home_loading-content__7_JjP","rtl-screen":"home_rtl-screen__Pwr_6"}},40689:function(e){e.exports={"login-page":"login_login-page__Vuefe","chakra-input":"login_chakra-input__H3Riz"}},93144:function(e){e.exports={card:"ui-lib_card__7vhpy",popover:"ui-lib_popover___HGhK","popover-content":"ui-lib_popover-content__DAsxM","slide-in":"ui-lib_slide-in__1VMXW","popover-mask":"ui-lib_popover-mask__HfrgX","list-item":"ui-lib_list-item__YH0DO","list-header":"ui-lib_list-header__RwThu","list-icon":"ui-lib_list-icon__HuWqu","list-item-title":"ui-lib_list-item-title__Fsa9c","list-item-sub-title":"ui-lib_list-item-sub-title__jSgHb",list:"ui-lib_list__1KN23","modal-container":"ui-lib_modal-container__V07hJ","modal-container-max":"ui-lib_modal-container-max__9yDQB","modal-content":"ui-lib_modal-content___F0dm","modal-header":"ui-lib_modal-header__ez8kk","modal-title":"ui-lib_modal-title__uDyyZ","modal-header-actions":"ui-lib_modal-header-actions__sGgzm","modal-header-action":"ui-lib_modal-header-action__TQHsu","modal-footer":"ui-lib_modal-footer__U6Gef","modal-actions":"ui-lib_modal-actions__Ag5eX","modal-action":"ui-lib_modal-action__o5vae",show:"ui-lib_show__Oyrs0",hide:"ui-lib_hide__HRR6J","toast-container":"ui-lib_toast-container__t7drF","toast-content":"ui-lib_toast-content__gUAwT","toast-action":"ui-lib_toast-action__fBR8E",input:"ui-lib_input__5JXLJ","select-with-icon":"ui-lib_select-with-icon__L6FLF","select-with-icon-select":"ui-lib_select-with-icon-select__JhHwp","select-with-icon-icon":"ui-lib_select-with-icon-icon__7R2_b","modal-input":"ui-lib_modal-input__vxrdT",selector:"ui-lib_selector__tdy57","selector-content":"ui-lib_selector-content__Ucr2_","slide-in-from-top":"ui-lib_slide-in-from-top__cfJKh"}}},function(e){e.O(0,[3180,1232,5330,2971,596,1744],function(){return e(e.s=9745)}),_N_E=e.O()}]);