(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4943,8340],{24333:function(e,t,n){"use strict";var s,r,a=n(2265);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}t.Z=function(e){return a.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),s||(s=a.createElement("defs",null,a.createElement("path",{id:"clear_svg__a",d:"M0 0h16v16H0z"}))),a.createElement("g",null,r||(r=a.createElement("mask",{id:"clear_svg__b",fill:"#fff"},a.createElement("use",{xlinkHref:"#clear_svg__a"}))),a.createElement("g",{mask:"url(#clear_svg__b)"},a.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(2.667 5)",d:"M1 9.67h8.67l1-9.67H0l1 9.67Z"}),a.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(6.667 8.334)",d:"M0 0v3.33"}),a.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(9.334 8.333)",d:"M0 0v3.33"}),a.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(4 1)",d:"m0 4 5.44-4L8 4"}))))}},43717:function(e,t,n){"use strict";n.d(t,{UK:function(){return i},YZ:function(){return l},x6:function(){return o}});var s=n(2265),r=n(19238),a=n(48718);function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,n]=(0,r.lr)();(0,s.useEffect)(()=>{let s=!1;t.forEach((n,r)=>{"function"==typeof e[r]&&(e[r](n),t.delete(r),s=!0)}),s&&n(t)},[t,e])}let o=":";function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};function t(e){return e.startsWith(o)?e.slice(1):e}return{match:function(n){let s=t(n),r="function"==typeof e[s];return{matched:r,invoke:()=>r&&e[s](n)}},search:function(n){let s=t(n),r=a.ZP.Chat.Commands;return Object.keys(e).filter(e=>e.startsWith(s)).map(e=>({title:r[e],content:o+e}))}}}},99254:function(e,t,n){"use strict";n.r(t),n.d(t,{Chat:function(){return e2},ChatActions:function(){return e6},EditMessageModal:function(){return e4},PromptHints:function(){return e0},SessionConfigModel:function(){return eq}});var s,r,a,l,o,i,c,d,m,u,h,p,v,g,f,x,_,k,w,y,j,E,b,C,S,P,M=n(57437),Z=n(72053),N=n(2265);function O(){return(O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}var T=function(e){return N.createElement("svg",O({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),s||(s=N.createElement("defs",null,N.createElement("path",{id:"send-white_svg__a",d:"M0 0h16v16H0z"}))),N.createElement("g",null,r||(r=N.createElement("mask",{id:"send-white_svg__b",fill:"#fff"},N.createElement("use",{xlinkHref:"#send-white_svg__a"}))),N.createElement("g",{mask:"url(#send-white_svg__b)"},N.createElement("path",{style:{stroke:"#fff",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(1.333 2)",d:"M0 4.71 6.67 6l1.67 6.67L12.67 0 0 4.71Z"}),N.createElement("path",{style:{stroke:"#fff",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(8.003 6.117)",d:"M0 1.89 1.89 0"}))))};function H(){return(H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}var D=function(e){return N.createElement("svg",H({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),a||(a=N.createElement("defs",null,N.createElement("path",{id:"brain_svg__a",d:"M0 0h16v16H0z"}))),N.createElement("g",null,l||(l=N.createElement("mask",{id:"brain_svg__b",fill:"#fff"},N.createElement("use",{xlinkHref:"#brain_svg__a"}))),N.createElement("g",{mask:"url(#brain_svg__b)"},N.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M5.01 13.33c-.32-1.06-.82-1.86-1.48-2.38-.98-.78-2.56-.3-3.14-1.11-.58-.8.41-2.29.76-3.17.34-.88-1.33-1.19-1.13-1.44.13-.16.97-.64 2.53-1.44C3 1.26 4.63 0 7.47 0c4.24 0 5.86 3.6 5.86 5.89 0 2.29-1.96 4.76-4.75 5.29-.25.37.11 1.08 1.08 2.15",transform:"translate(1.333 1.333)"}),N.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M2.1 3.33c-.19 1.09.04 1.6.69 1.53.65-.07 1.05-.34 1.18-.81 1.02.28 1.57.04 1.66-.72.12-1.15-.5-2.07-.75-2.07s-.91-.03-.91-.38C3.97.52 3.2.33 2.5.33c-.69 0-.27-.47-1.23-.29C.64.17.26.44.13.88c-.22.84-.16 1.43.19 1.78.35.34.94.56 1.78.67Z",transform:"translate(6.374 3.957)"}),N.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M1.97 0c-.34.21-.8.56-1 .83-.49.69-.88 1.1-.97 1.54",transform:"translate(8.193 8.5)"}))))};function A(){return(A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}var K=function(e){return N.createElement("svg",A({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),o||(o=N.createElement("defs",null,N.createElement("path",{id:"rename_svg__a",d:"M0 0h16v16H0z"}))),N.createElement("g",null,i||(i=N.createElement("mask",{id:"rename_svg__b",fill:"#fff"},N.createElement("use",{xlinkHref:"#rename_svg__a"}))),N.createElement("g",{mask:"url(#rename_svg__b)"},N.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(1.775 1.3)",d:"M2.83 13.2 13.2 2.83 10.37 0 0 10.37v2.83h2.83Z"}),N.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(9.317 4.13)",d:"m0 0 2.83 2.83"}))))};function I(){return(I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}var W=function(e){return N.createElement("svg",I({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),c||(c=N.createElement("defs",null,N.createElement("path",{id:"share_svg__a",d:"M0 0h16v16H0z"}))),N.createElement("g",null,d||(d=N.createElement("mask",{id:"share_svg__b",fill:"#fff"},N.createElement("use",{xlinkHref:"#share_svg__a"}))),N.createElement("g",{mask:"url(#share_svg__b)"},N.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M6.67 3.67C1.67 3.67 0 7.33 0 13c0 0 2-5 6.67-5v3.67l6-5.67-6-6v3.67Z",transform:"translate(2 1.333)"}))))};function R(){return(R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}var L=function(e){return N.createElement("svg",R({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),m||(m=N.createElement("defs",null,N.createElement("path",{id:"return_svg__a",d:"M0 0h16v16H0z"}))),N.createElement("g",null,u||(u=N.createElement("mask",{id:"return_svg__b",fill:"#fff"},N.createElement("use",{xlinkHref:"#return_svg__a"}))),N.createElement("g",{mask:"url(#return_svg__b)"},N.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(2 2.667)",d:"M2.33 0 0 2l2.33 2.33"}),N.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(2 4.667)",d:"M0 0h7.66c2.3 0 4.25 1.87 4.34 4.17.09 2.42-1.91 4.5-4.34 4.5H2"}))))},z=n(84193),F=n(24053);function B(){return(B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}var Q=function(e){return N.createElement("svg",B({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),h||(h=N.createElement("defs",null,N.createElement("path",{id:"prompt_svg__a",d:"M0 0h16v16H0z"}))),N.createElement("g",null,p||(p=N.createElement("mask",{id:"prompt_svg__b",fill:"#fff"},N.createElement("use",{xlinkHref:"#prompt_svg__a"}))),N.createElement("g",{mask:"url(#prompt_svg__b)"},N.createElement("path",{style:{stroke:"#333",strokeWidth:1.3,strokeOpacity:1,strokeDasharray:"0 0"},d:"m1.367 1.367 1.41 1.41M4.667 0v2m0 0V0m3.295 1.367-1.41 1.41m0 0 1.41-1.41m1.371 3.3h-2m0 0h2m-1.37 3.295-1.41-1.41m0 0 1.41 1.41M4.666 9.333v-2m0 0v2m-3.3-1.37 1.41-1.41m0 0-1.41 1.41M0 4.666h2m0 0H0",transform:"translate(5.333 1.333)"}),N.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M8.01 0 0 8.01",transform:"translate(1.848 6.138)"}))))},X=n(14845),G=n(68397),U=n(98829);function V(){return(V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}var Y=function(e){return N.createElement("svg",V({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),N.createElement("path",{style:{fill:"#333",opacity:1},d:"M13.275-.275c.261.26.392.576.392.945v10.66c0 .37-.131.684-.392.945a1.288 1.288 0 0 1-.945.392H1.67c-.37 0-.684-.13-.945-.392a1.288 1.288 0 0 1-.392-.945V.67c0-.37.13-.684.392-.945.26-.261.576-.392.945-.392h10.66c.369 0 .684.13.945.392zM1.667 11.33c0 .002 0 .003.003.003h10.66c.002 0 .003 0 .003-.003V.67c0-.002 0-.003-.003-.003H1.67c-.002 0-.003 0-.003.003z",transform:"translate(1 2)"}),N.createElement("path",{style:{fill:"#333",opacity:1},d:"M9.763 7.507a.666.666 0 0 1-.867 0L7 5.878 5.104 7.506a.665.665 0 0 1-.867.001L2.331 5.878.434 7.506a.66.66 0 0 1-.485.16.66.66 0 0 1-.53-.338.665.665 0 0 1 .147-.834l2.33-2a.666.666 0 0 1 .867 0L4.67 6.123l1.897-1.629a.666.666 0 0 1 .868 0l1.897 1.629 1.906-1.63a.668.668 0 0 1 .867.002l2.33 2a.66.66 0 0 1 .23.455.661.661 0 0 1-.252.575.666.666 0 0 1-.846-.019l-1.897-1.628z",transform:"translate(1 2)"}),v||(v=N.createElement("g",null,N.createElement("mask",{id:"break_svg__b",fill:"#fff"},N.createElement("use",{xlinkHref:"#break_svg__a"})))),g||(g=N.createElement("defs",null,N.createElement("path",{id:"break_svg__a",d:"M0 0h16v16H0z"}))))},J=n(24333);function q(){return(q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}var $=function(e){return N.createElement("svg",q({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),N.createElement("g",null,f||(f=N.createElement("mask",{id:"pin_svg__b",fill:"#fff"},N.createElement("use",{xlinkHref:"#pin_svg__a"}))),N.createElement("g",{mask:"url(#pin_svg__b)"},N.createElement("path",{style:{fill:"#333",opacity:1},d:"m6.685 8.81-4 5.44-.537-.394-.397-.536 5.42-4.01a.666.666 0 0 1 .866.062l.532.528 2.07 2.063-.471.473-.472-.472c.3-.3.457-.62.472-.963.015-.353-.108-.798-.37-1.333a.665.665 0 0 1 .017-.616l2.36-4.25a.662.662 0 0 1 .679-.336l1.65.24-.096.66-.472.471-3.77-3.77.472-.471.66-.096.24 1.65a.664.664 0 0 1-.337.678l-4.25 2.36a.665.665 0 0 1-.646.001c-.479-.265-.903-.388-1.27-.369-.358.018-.69.18-.996.487l-.471-.471.471-.472 2.06 2.06.52.52a.665.665 0 0 1 .066.867zM5.61 8.02l.537.396-.472.471-.52-.52-2.06-2.06a.665.665 0 0 1 0-.943c.548-.548 1.172-.84 1.87-.875.622-.032 1.283.146 1.984.533l-.322.584-.324-.583 4.25-2.36.324.583-.66.096-.24-1.65a.664.664 0 0 1 .66-.763.665.665 0 0 1 .471.195l3.77 3.77a.666.666 0 0 1-.567 1.131l-1.65-.24.096-.66.583.324-2.36 4.25-.583-.323.599-.293c.36.738.527 1.396.503 1.974-.029.689-.316 1.305-.86 1.85a.664.664 0 0 1-.842.083.667.667 0 0 1-.101-.082l-2.068-2.062-.531-.527.47-.473.396.535-5.42 4.01a.663.663 0 0 1-.791.002.664.664 0 0 1-.142-.932z"}))),x||(x=N.createElement("defs",null,N.createElement("path",{id:"pin_svg__a",d:"M0 0h16v16H0z"}))))},ee=n(12402),et=n(82985);function en(){return(en=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}var es=function(e){return N.createElement("svg",en({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),_||(_=N.createElement("defs",null,N.createElement("path",{id:"light_svg__a",d:"M0 0h16v16H0z"}))),N.createElement("g",null,k||(k=N.createElement("mask",{id:"light_svg__b",fill:"#fff"},N.createElement("use",{xlinkHref:"#light_svg__a"}))),N.createElement("g",{mask:"url(#light_svg__b)"},N.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(3.667 3.667)",d:"M8.67 4.33C8.67 1.94 6.73 0 4.33 0 1.94 0 0 1.94 0 4.33a4.334 4.334 0 1 0 8.67 0Z"}),N.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},transform:"translate(7.167 .333)",d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z"}),N.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},transform:"translate(12 2.333)",d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z"}),N.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},transform:"translate(14 7.167)",d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z"}),N.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},transform:"translate(12 12)",d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z"}),N.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},transform:"translate(7.167 14)",d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z"}),N.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},transform:"translate(2.333 12)",d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z"}),N.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},transform:"translate(.333 7.167)",d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z"}),N.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},transform:"translate(2.333 2.333)",d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z"}))))};function er(){return(er=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}var ea=function(e){return N.createElement("svg",er({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),w||(w=N.createElement("defs",null,N.createElement("path",{id:"dark_svg__a",d:"M0 0h16v16H0z"}))),N.createElement("g",null,y||(y=N.createElement("mask",{id:"dark_svg__b",fill:"#fff"},N.createElement("use",{xlinkHref:"#dark_svg__a"}))),N.createElement("g",{mask:"url(#dark_svg__b)"},N.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(1.333 1.333)",d:"M6.67 0C2.98 0 0 2.98 0 6.67a6.66 6.66 0 0 0 6.67 6.66c3.68 0 6.66-2.98 6.66-6.66 0-.47-.04-.92-.13-1.35a4.251 4.251 0 0 1-4.11 3.16c-2.34 0-4.24-1.89-4.24-4.24 0-1.97 1.34-3.63 3.17-4.1C7.58.05 7.13 0 6.67 0Z"}))))};function el(){return(el=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}var eo=function(e){return N.createElement("svg",el({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),j||(j=N.createElement("defs",null,N.createElement("path",{id:"auto_svg__a",d:"M0 0h16v16H0z"}))),N.createElement("g",null,E||(E=N.createElement("mask",{id:"auto_svg__b",fill:"#fff"},N.createElement("use",{xlinkHref:"#auto_svg__a"}))),N.createElement("g",{mask:"url(#auto_svg__b)"},N.createElement("path",{style:{stroke:"#333",strokeWidth:1,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(5.667 5.333)",d:"m0 5.337.73-1.67m3.938 1.67-.73-1.67M.728 3.67 2.33 0l1.61 3.67M.73 3.667h3.21"}),N.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(1.333 1.333)",d:"M13.07 5.33A6.672 6.672 0 0 0 0 5.33l2-.66"}),N.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(1.333 9.333)",d:"M0 0a6.672 6.672 0 0 0 13.07 0l-1.74.67"}))))};function ei(){return(ei=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}var ec=function(e){return N.createElement("svg",ei({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),b||(b=N.createElement("defs",null,N.createElement("path",{id:"bottom_svg__a",d:"M0 0h16v16H0z"}))),N.createElement("g",null,C||(C=N.createElement("mask",{id:"bottom_svg__b",fill:"#fff"},N.createElement("use",{xlinkHref:"#bottom_svg__a"}))),N.createElement("g",{mask:"url(#bottom_svg__b)"},N.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M8 0 4 4 0 0",transform:"translate(4 4)"}),N.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M8 0 4 4 0 0",transform:"translate(4 8)"}))))};function ed(){return(ed=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}var em=function(e){return N.createElement("svg",ed({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),S||(S=N.createElement("defs",null,N.createElement("path",{id:"pause_svg__a",d:"M0 0h16v16H0z"}))),N.createElement("g",null,P||(P=N.createElement("mask",{id:"pause_svg__b",fill:"#fff"},N.createElement("use",{xlinkHref:"#pause_svg__a"}))),N.createElement("g",{mask:"url(#pause_svg__b)"},N.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(1.333 1.333)",d:"M13.33 6.67A6.66 6.66 0 0 0 6.67 0C2.98 0 0 2.98 0 6.67a6.66 6.66 0 0 0 6.67 6.66c3.68 0 6.66-2.98 6.66-6.66Z"}),N.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(6.333 6)",d:"M0 0v4"}),N.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(9.667 6)",d:"M0 0v4"}))))},eu=n(78566),eh=n(74709),ep=n(98864),ev=n.n(ep),eg=n(48183),ef=n(58670),ex=n(48718),e_=n(71856),ek=n(97010),ew=n.n(ek),ey=n(26537),ej=n(5954),eE=n(29380),eb=n(47004),eC=n(28167),eS=n(1229),eP=n(43717),eM=n(51118),eZ=n.n(eM),eN={src:"/_next/static/media/bot.0c800005.png"},eO=n(72495),eT=n(25933),eH=n.n(eT);function eD(e){let t=(0,eu.aK)(),n=t.currentSession(),s=e=>e.content&&!e.streaming,r=n.messages.filter((e,t)=>(null==e?void 0:e._id)&&s(e)&&(t>=n.messages.length-1||s(n.messages[t+1]))),a=r.length,l=(0,eu.MG)(),[o,i]=(0,N.useState)(""),[c,d]=(0,N.useState)(new Set),m=e=>0===o.length||c.has(e),u=e=>{let t=new Set;e.length>0&&r.forEach(n=>n.content.includes(e)?t.add(null==n?void 0:n._id):null),d(t)},{startIndex:h,endIndex:p,onClickIndex:v}=function(){let[e,t]=(0,N.useState)(),[n,s]=(0,N.useState)(),[r,a]=(0,N.useState)(!1);return(0,N.useEffect)(()=>{let e=e=>{"Shift"===e.key&&a(!0)},n=e=>{"Shift"===e.key&&(a(!1),t(void 0),s(void 0))};return window.addEventListener("keyup",n),window.addEventListener("keydown",e),()=>{window.removeEventListener("keyup",n),window.removeEventListener("keydown",e)}},[]),{onClickIndex:n=>{r&&void 0!==e?s(n):(t(n),s(void 0))},startIndex:e,endIndex:n}}(),g=()=>{e.updateSelection(e=>r.forEach(t=>e.add(null==t?void 0:t._id)))};return(0,N.useEffect)(()=>{e.defaultSelectAll&&g()},[]),(0,N.useEffect)(()=>{if(void 0===h||void 0===p)return;let[t,n]=[h,p].sort((e,t)=>e-t);e.updateSelection(e=>{for(let l=t;l<=n;l+=1){var s,a;e.add(null!==(a=null===(s=r[l])||void 0===s?void 0:s._id)&&void 0!==a?a:l)}})},[h,p]),(0,M.jsxs)("div",{className:eH()["message-selector"],children:[(0,M.jsxs)("div",{className:eH()["message-filter"],children:[(0,M.jsx)("input",{type:"text",placeholder:ex.ZP.Select.Search,className:eH()["filter-item"]+" "+eH()["search-bar"],value:o,onInput:e=>{i(e.currentTarget.value),u(e.currentTarget.value)}}),(0,M.jsxs)("div",{className:eH().actions,children:[(0,M.jsx)(e_.h,{text:ex.ZP.Select.All,bordered:!0,className:eH()["filter-item"],onClick:g}),(0,M.jsx)(e_.h,{text:ex.ZP.Select.Latest,bordered:!0,className:eH()["filter-item"],onClick:()=>e.updateSelection(e=>{e.clear(),r.slice(a-4).forEach(t=>e.add(null==t?void 0:t._id))})}),(0,M.jsx)(e_.h,{text:ex.ZP.Select.Clear,bordered:!0,className:eH()["filter-item"],onClick:()=>e.updateSelection(e=>e.clear())})]})]}),(0,M.jsx)("div",{className:eH().messages,children:r.map((t,s)=>m(null==t?void 0:t._id)?(0,M.jsxs)("div",{className:"".concat(eH().message," ").concat(e.selection.has(null==t?void 0:t._id)&&eH()["message-selected"]),onClick:()=>{e.updateSelection(e=>{var n;let r=null!==(n=null==t?void 0:t._id)&&void 0!==n?n:s;e.has(r)?e.delete(r):e.add(r)}),v(s)},children:[(0,M.jsx)("div",{className:eH().avatar,children:"user"===t.role?(0,M.jsx)(eb.qE,{avatar:l.avatar}):(0,M.jsx)(eC.MaskAvatar,{mask:n.mask})}),(0,M.jsxs)("div",{className:eH().body,children:[(0,M.jsx)("div",{className:eH().date}),(0,M.jsx)("div",{className:"".concat(eH().content," one-line"),children:t.content})]})]},s):null)})]})}var eA=n(16691),eK=n.n(eA),eI=n(58328),eW=n(19035),eR=n(27134),eL=n(58058);let ez=ev()(async()=>(await Promise.all([n.e(4730),n.e(3954),n.e(3137),n.e(4220)]).then(n.bind(n,62006))).Markdown,{loadableGenerated:{webpack:()=>[62006]},loading:()=>(0,M.jsx)(F.Z,{})});function eF(e){return(0,M.jsx)("div",{className:"modal-mask",children:(0,M.jsx)(ey.u_,{title:ex.ZP.Export.Title,onClose:e.onClose,children:(0,M.jsx)("div",{style:{minHeight:"40vh"},children:(0,M.jsx)(eQ,{})})})})}function eB(e){let t=e.steps,n=t.length;return(0,M.jsxs)("div",{className:eZ().steps,children:[(0,M.jsx)("div",{className:eZ()["steps-progress"],children:(0,M.jsx)("div",{className:eZ()["steps-progress-inner"],style:{width:"".concat((e.index+1)/n*100,"%")}})}),(0,M.jsx)("div",{className:eZ()["steps-inner"],children:t.map((t,n)=>(0,M.jsxs)("div",{className:"".concat(eZ().step," ").concat(eZ()[n<=e.index?"step-finished":""]," ").concat(n===e.index&&eZ()["step-current"]," clickable"),onClick:()=>{var t;null===(t=e.onStepChange)||void 0===t||t.call(e,n)},role:"button",children:[(0,M.jsx)("span",{className:eZ()["step-index"],children:n+1}),(0,M.jsx)("span",{className:eZ()["step-name"],children:t.name})]},n))})]})}function eQ(){let e=[{name:ex.ZP.Export.Steps.Select,value:"select"},{name:ex.ZP.Export.Steps.Preview,value:"preview"}],{currentStep:t,setCurrentStepIndex:n,currentStepIndex:s}=function(e){let t=e.length,[n,s]=(0,N.useState)(0);return{currentStepIndex:n,setCurrentStepIndex:s,nextStep:()=>s((n+1)%t),prevStep:()=>s((n-1+t)%t),currentStep:e[n]}}(e),[r,a]=(0,N.useState)({format:"image",includeContext:!0});function l(e){let t={...r};e(t),a(t)}let o=(0,eu.aK)(),i=o.currentSession(),{selection:c,updateSelection:d}=function(){let[e,t]=(0,N.useState)(new Set);return{selection:e,updateSelection:n=>{let s=new Set(e);n(s),t(s)}}}(),m=(0,N.useMemo)(()=>{let e=[];return r.includeContext&&e.push(...i.mask.context),e.push(...i.messages.filter((e,t)=>c.has(e._id))),e},[r.includeContext,i.messages,i.mask.context,c]);return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(eB,{steps:e,index:s,onStepChange:n}),(0,M.jsxs)("div",{className:eZ()["message-exporter-body"],style:"select"!==t.value?{display:"none"}:{},children:[(0,M.jsxs)(ey.aV,{children:[(0,M.jsx)(ey.HC,{title:ex.ZP.Export.Format.Title,subTitle:ex.ZP.Export.Format.SubTitle,children:(0,M.jsx)(ey.Ph,{value:r.format,onChange:e=>l(t=>t.format=e.currentTarget.value),children:["text","image"].map(e=>(0,M.jsx)("option",{value:e,children:e},e))})}),(0,M.jsx)(ey.HC,{title:ex.ZP.Export.IncludeContext.Title,subTitle:ex.ZP.Export.IncludeContext.SubTitle,children:(0,M.jsx)("input",{type:"checkbox",checked:r.includeContext,onChange:e=>{l(t=>t.includeContext=e.currentTarget.checked)}})})]}),(0,M.jsx)(eD,{selection:c,updateSelection:d,defaultSelectAll:!0})]}),"preview"===t.value&&(0,M.jsx)("div",{className:eZ()["message-exporter-body"],children:"text"===r.format?(0,M.jsx)(eY,{messages:m,topic:i.topic}):(0,M.jsx)(eV,{messages:m,topic:i.topic})})]})}function eX(e){let t=(0,N.useRef)(null);return(0,N.useEffect)(()=>{if(!t.current)return;let n=t.current,s=Array.from(n.getElementsByClassName(eE.yY));if(s.length!==e.messages.length)return;let r=s.map((e,t)=>{var n;let[s,r]=null==e?void 0:e.id.split(":");return{_id:t.toString(),role:s,content:"user"===s?null!==(n=e.textContent)&&void 0!==n?n:"":e.innerHTML,date:""}});e.onRender(r)}),(0,M.jsx)("div",{ref:t,children:e.messages.map((e,t)=>(0,M.jsx)("div",{id:"".concat(e.role,":").concat(t),className:eE.yY,children:(0,M.jsx)(ez,{content:e.content,defaultShow:!0})},t))})}function eG(e){var t;let[n,s]=(0,N.useState)(!1),[r,a]=(0,N.useState)(!1),l=async()=>{var t;(null===(t=e.messages)||void 0===t?void 0:t.length)&&(s(!0),a(!0))};return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)("div",{className:eZ()["preview-actions"],children:[e.showCopy&&(0,M.jsx)(e_.h,{text:ex.ZP.Export.Copy,bordered:!0,shadow:!0,icon:(0,M.jsx)(z.Z,{}),onClick:e.copy}),(0,M.jsx)(e_.h,{text:ex.ZP.Export.Download,bordered:!0,shadow:!0,icon:(0,M.jsx)(eO.Z,{}),onClick:e.download}),(0,M.jsx)(e_.h,{text:ex.ZP.Export.Share,bordered:!0,shadow:!0,icon:n?(0,M.jsx)(F.Z,{}):(0,M.jsx)(W,{}),onClick:l})]}),(0,M.jsx)("div",{style:{position:"fixed",right:"200vw",pointerEvents:"none"},children:r&&(0,M.jsx)(eX,{messages:null!==(t=e.messages)&&void 0!==t?t:[],onRender:e=>{a(!1),eW.hi.share(e).then(e=>{e&&((0,ey.K4)({title:ex.ZP.Export.Share,children:[(0,M.jsx)("input",{type:"text",value:e,style:{width:"100%",maxWidth:"unset"},readOnly:!0,onClick:e=>e.currentTarget.select()},"input")],actions:[(0,M.jsx)(e_.h,{icon:(0,M.jsx)(z.Z,{}),text:ex.ZP.Chat.Actions.Copy,onClick:()=>(0,eh.vQ)(e)},"copy")]}),setTimeout(()=>{window.open(e,"_blank")},800))}).catch(e=>{console.error("[Share]",e),(0,ey.CF)((0,eR.B)(e))}).finally(()=>s(!1))}})})]})}function eU(e){return e.avatar===eS._G?(0,M.jsx)(eK(),{src:eN.src,width:30,height:30,alt:"bot",className:"user-avatar"}):(0,M.jsx)(eb.qE,{avatar:e.avatar})}function eV(e){let t=(0,eu.aK)(),n=t.currentSession(),s=n.mask,r=(0,eu.MG)(),a=(0,N.useRef)(null),l=(0,eh.S0)();return(0,M.jsxs)("div",{className:eZ()["image-previewer"],children:[(0,M.jsx)(eG,{copy:()=>{(0,ey.CF)(ex.ZP.Export.Image.Toast);let e=a.current;e&&(0,eI.SE)(e).then(e=>{if(e)try{navigator.clipboard.write([new ClipboardItem({"image/png":e})]).then(()=>{(0,ey.CF)(ex.ZP.Copy.Success)})}catch(e){console.error("[Copy Image] ",e),(0,ey.CF)(ex.ZP.Copy.Failed)}})},download:()=>{(0,ey.CF)(ex.ZP.Export.Image.Toast);let t=a.current;t&&(0,eI.YM)(t).then(t=>{var n;if(t){if(l||(null===(n=(0,eL.Z)())||void 0===n?void 0:n.isApp))(0,ey.vi)(t);else{let n=document.createElement("a");n.download="".concat(e.topic,".png"),n.href=t,n.click()}}}).catch(e=>console.log("[Export Image] ",e))},showCopy:!l,messages:e.messages}),(0,M.jsxs)("div",{className:"".concat(eZ()["preview-body"]," ").concat(eZ()["default-theme"]),ref:a,children:[(0,M.jsxs)("div",{className:eZ()["chat-info"],children:[(0,M.jsx)("div",{className:eZ().logo+" no-dark",children:(0,M.jsx)(eK(),{src:"/_next/static/media/chatgpt.1956a04f.png",alt:"logo",width:50,height:50})}),(0,M.jsxs)("div",{children:[(0,M.jsx)("div",{className:eZ()["main-title"],children:"千知GPT"}),(0,M.jsx)("div",{className:eZ()["sub-title"],children:"github.com/Yidadaa/ChatGPT-Next-Web"}),(0,M.jsxs)("div",{className:eZ().icons,children:[(0,M.jsx)(eU,{avatar:r.avatar}),(0,M.jsx)("span",{className:eZ()["icon-space"],children:"&"}),(0,M.jsx)(eU,{avatar:s.avatar})]})]}),(0,M.jsxs)("div",{children:[(0,M.jsxs)("div",{className:eZ()["chat-info-item"],children:[ex.ZP.Exporter.Model,": ",s.modelConfig.model]}),(0,M.jsxs)("div",{className:eZ()["chat-info-item"],children:[ex.ZP.Exporter.Messages,": ",e.messages.length]}),(0,M.jsxs)("div",{className:eZ()["chat-info-item"],children:[ex.ZP.Exporter.Topic,": ",n.topic]}),(0,M.jsxs)("div",{className:eZ()["chat-info-item"],children:[ex.ZP.Exporter.Time,":"," "]})]})]}),e.messages.map((e,t)=>(0,M.jsxs)("div",{className:eZ().message+" "+eZ()["message-"+e.role],children:[(0,M.jsx)("div",{className:eZ().avatar,children:(0,M.jsx)(eU,{avatar:"user"===e.role?r.avatar:s.avatar})}),(0,M.jsx)("div",{className:eZ().body,children:(0,M.jsx)(ez,{content:e.content,fontSize:r.fontSize,defaultShow:!0})})]},t))]})]})}function eY(e){let t="# ".concat(e.topic,"\n\n")+e.messages.map(e=>"user"===e.role?"## ".concat(ex.ZP.Export.MessageFromYou,":\n").concat(e.content):"## ".concat(ex.ZP.Export.MessageFromChatGPT,":\n").concat(e.content.trim())).join("\n\n");return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(eG,{copy:()=>{(0,eh.vQ)(t)},download:()=>{(0,eh.CP)(t,"".concat(e.topic,".md"))},messages:e.messages}),(0,M.jsx)("div",{className:"markdown-body",children:(0,M.jsx)("pre",{className:eZ()["export-content"],children:t})})]})}let eJ=ev()(async()=>(await Promise.all([n.e(4730),n.e(3954),n.e(3137),n.e(4220)]).then(n.bind(n,62006))).Markdown,{loadableGenerated:{webpack:()=>[62006]},loading:()=>(0,M.jsx)(F.Z,{})});function eq(e){var t;let n=(0,eu.aK)(),s=n.currentSession(),r=(0,eS.Zy)(),a=(0,ej.s0)();return(0,M.jsx)("div",{className:"modal-mask",children:(0,M.jsx)(ey.u_,{title:ex.ZP.Context.Edit,onClose:()=>e.onClose(),actions:[(0,M.jsx)(e_.h,{icon:(0,M.jsx)(U.Z,{}),bordered:!0,text:ex.ZP.Chat.Config.Reset,onClick:async()=>{await (0,ey.i0)(ex.ZP.Memory.ResetConfirm)&&n.updateCurrentSession(e=>e.memoryPrompt="")}},"reset"),(0,M.jsx)(e_.h,{icon:(0,M.jsx)(z.Z,{}),bordered:!0,text:ex.ZP.Chat.Config.SaveAs,onClick:()=>{a(eE.y$.Masks),setTimeout(()=>{r.create(s.mask)},500)}},"copy")],children:(0,M.jsx)(eC.MaskConfig,{mask:s.mask,updateMask:e=>{let t={...s.mask};e(t),n.updateCurrentSession(e=>e.mask=t)},shouldSyncFromGlobal:!0,extraListItems:s.mask.modelConfig.sendMemory?(0,M.jsx)(ey.HC,{title:"".concat(ex.ZP.Memory.Title," (").concat(s.lastSummarizeIndex," of ").concat(null==s?void 0:null===(t=s.messages)||void 0===t?void 0:t.length,")"),subTitle:s.memoryPrompt||ex.ZP.Memory.EmptyContent}):(0,M.jsx)(M.Fragment,{})})})})}function e$(e){var t;let n=(0,eu.aK)(),s=n.currentSession();return null==s||null===(t=s.mask)||void 0===t||t.context,(0,M.jsxs)("div",{className:ew()["prompt-toast"],children:[e.showToast&&(0,M.jsx)("div",{className:ew()["prompt-toast-inner"]+" clickable",role:"button",onClick:()=>e.setShowModal(!0),children:(0,M.jsx)(D,{})}),e.showModal&&(0,M.jsx)(eq,{onClose:()=>e.setShowModal(!1)})]},"prompt-toast")}function e0(e){var t,n,s;let r=(null==e?void 0:null===(t=e.prompts)||void 0===t?void 0:t.length)===0,[a,l]=(0,N.useState)(0),o=(0,N.useRef)(null);return((0,N.useEffect)(()=>{l(0)},[null==e?void 0:null===(n=e.prompts)||void 0===n?void 0:n.length]),(0,N.useEffect)(()=>{let t=t=>{if(r||t.metaKey||t.altKey||t.ctrlKey)return;let n=n=>{var s,r;t.stopPropagation(),t.preventDefault();let i=Math.max(0,Math.min((null==e?void 0:null===(s=e.prompts)||void 0===s?void 0:s.length)-1,a+n));l(i),null===(r=o.current)||void 0===r||r.scrollIntoView({block:"center"})};if("ArrowUp"===t.key)n(1);else if("ArrowDown"===t.key)n(-1);else if("Enter"===t.key){let t=e.prompts.at(a);t&&e.onPromptSelect(t)}};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[null==e?void 0:null===(s=e.prompts)||void 0===s?void 0:s.length,a]),r)?null:(0,M.jsx)("div",{className:ew()["prompt-hints"],children:e.prompts.map((t,n)=>(0,M.jsxs)("div",{ref:n===a?o:null,className:ew()["prompt-hint"]+" ".concat(n===a?ew()["prompt-hint-selected"]:""),onClick:()=>e.onPromptSelect(t),onMouseEnter:()=>l(n),children:[(0,M.jsx)("div",{className:ew()["hint-title"],children:t.title}),(0,M.jsx)("div",{className:ew()["hint-content"],children:t.content})]},t.title+n.toString()))})}function e3(){let e=(0,eu.aK)();return(0,M.jsxs)("div",{className:ew()["clear-context"],onClick:()=>e.updateCurrentSession(e=>e.clearContextIndex=void 0),children:[(0,M.jsx)("div",{className:ew()["clear-context-tips"],children:ex.ZP.Context.Clear}),(0,M.jsx)("div",{className:ew()["clear-context-revert-btn"],children:ex.ZP.Context.Revert})]})}function e1(e){let t=(0,N.useRef)(null),n=(0,N.useRef)(null),[s,r]=(0,N.useState)({full:16,icon:16});function a(){if(!t.current||!n.current)return;let e=n.current.getBoundingClientRect().width,s=t.current.getBoundingClientRect().width;r({full:e+s,icon:s})}return(0,M.jsxs)("div",{className:"".concat(ew()["chat-input-action"]," clickable"),onClick:()=>{e.onClick(),setTimeout(a,1)},onMouseEnter:a,onTouchStart:a,style:{"--icon-width":"".concat(s.icon,"px"),"--full-width":"".concat(s.full,"px")},children:[(0,M.jsx)("div",{ref:t,className:ew().icon,children:e.icon}),(0,M.jsx)("div",{className:ew().text,ref:n,children:e.text})]})}function e6(e){let t=(0,eu.MG)();(0,ej.s0)();let n=(0,eu.aK)(),s=t.theme;console.log("config",t);let r=eg.L.hasPending();return(0,M.jsxs)("div",{className:ew()["chat-input-actions"],children:[r&&(0,M.jsx)(e1,{onClick:()=>eg.L.stopAll(),text:ex.ZP.Chat.InputActions.Stop,icon:(0,M.jsx)(em,{})}),!e.hitBottom&&(0,M.jsx)(e1,{onClick:e.scrollToBottom,text:ex.ZP.Chat.InputActions.ToBottom,icon:(0,M.jsx)(ec,{})}),(0,M.jsx)(e1,{onClick:function(){let e=[eu.Q2.Auto,eu.Q2.Light,eu.Q2.Dark],n=e.indexOf(s),r=(n+1)%(null==e?void 0:e.length),a=e[r];t.update(e=>e.theme=a)},text:ex.ZP.Chat.InputActions.Theme[s],icon:(0,M.jsx)(M.Fragment,{children:s===eu.Q2.Auto?(0,M.jsx)(eo,{}):s===eu.Q2.Light?(0,M.jsx)(es,{}):s===eu.Q2.Dark?(0,M.jsx)(ea,{}):null})}),(0,M.jsx)(e1,{onClick:e.showPromptHints,text:ex.ZP.Chat.InputActions.Prompt,icon:(0,M.jsx)(Q,{})}),(0,M.jsx)(e1,{text:ex.ZP.Chat.InputActions.Clear,icon:(0,M.jsx)(Y,{}),onClick:()=>{n.updateCurrentSession(e=>{var t,n;e.clearContextIndex===(null==e?void 0:null===(t=e.messages)||void 0===t?void 0:t.length)?e.clearContextIndex=void 0:(e.clearContextIndex=null==e?void 0:null===(n=e.messages)||void 0===n?void 0:n.length,e.memoryPrompt="")})}})]})}function e4(e){var t;let n=(0,eu.aK)(),s=n.currentSession(),[r,a]=(0,N.useState)(null===(t=(null==s?void 0:s.messages)||[])||void 0===t?void 0:t.slice());return(0,M.jsx)("div",{className:"modal-mask",children:(0,M.jsxs)(ey.u_,{title:ex.ZP.Chat.EditMessage.Title,onClose:e.onClose,actions:[(0,M.jsx)(e_.h,{text:ex.ZP.UI.Cancel,icon:(0,M.jsx)(et.Z,{}),onClick:()=>{e.onClose()}},"cancel"),(0,M.jsx)(e_.h,{type:"primary",text:ex.ZP.UI.Confirm,icon:(0,M.jsx)(ee.Z,{}),onClick:()=>{n.updateCurrentSession(e=>e.messages=r),e.onClose()}},"ok")],children:[(0,M.jsx)(ey.aV,{children:(0,M.jsx)(ey.HC,{title:ex.ZP.Chat.EditMessage.Topic.Title,subTitle:ex.ZP.Chat.EditMessage.Topic.SubTitle,children:(0,M.jsx)("input",{type:"text",value:s.topic,onInput:e=>n.updateCurrentSession(t=>t.topic=e.currentTarget.value)})})}),(0,M.jsx)(eC.ContextPrompts,{context:r,updateContext:e=>{let t=null==r?void 0:r.slice();e(t),a(t)}})]})})}function e7(){var e,t;let n=(0,eu.aK)(),s=n.currentSession(),r=(0,eu.MG)(),a=r.fontSize,[l,o]=(0,N.useState)(!1),i=(0,N.useRef)(null),[c,d]=(0,N.useState)(""),[m,u]=(0,N.useState)(!1),{submitKey:h,shouldSubmit:p}=function(){let e=(0,eu.MG)(),t=e.submitKey,n=(0,N.useRef)(!1);return(0,N.useEffect)(()=>{let e=()=>{n.current=!0},t=()=>{n.current=!1};return window.addEventListener("compositionstart",e),window.addEventListener("compositionend",t),()=>{window.removeEventListener("compositionstart",e),window.removeEventListener("compositionend",t)}},[]),{submitKey:t,shouldSubmit:t=>"Enter"===t.key&&("Enter"!==t.key||!t.nativeEvent.isComposing&&!n.current)&&(e.submitKey===eu.mQ.AltEnter&&t.altKey||e.submitKey===eu.mQ.CtrlEnter&&t.ctrlKey||e.submitKey===eu.mQ.ShiftEnter&&t.shiftKey||e.submitKey===eu.mQ.MetaEnter&&t.metaKey||e.submitKey===eu.mQ.Enter&&!t.altKey&&!t.ctrlKey&&!t.shiftKey&&!t.metaKey)}}(),{scrollRef:v,setAutoScroll:g,scrollDomToBottom:f}=function(){let e=(0,N.useRef)(null),[t,n]=(0,N.useState)(!0);function s(){let t=e.current;t&&requestAnimationFrame(()=>{n(!0),t.scrollTo(0,t.scrollHeight)})}return(0,N.useEffect)(()=>{t&&s()}),{scrollRef:e,autoScroll:t,setAutoScroll:n,scrollDomToBottom:s}}(),[x,_]=(0,N.useState)(!0),k=(0,eh.S0)(),w=(0,ej.s0)(),y=(0,ef.f)(),[j,E]=(0,N.useState)([]),b=(0,Z.y1)(e=>{let t=y.search(e);E(t)},100,{leading:!0,trailing:!0}),[C,S]=(0,N.useState)(2),P=(0,Z.y1)(()=>{let e=i.current?(0,eh.lx)(i.current):1,t=Math.min(20,Math.max(2+Number(!k),e));S(t)},100,{leading:!0,trailing:!0});(0,N.useEffect)(P,[c]);let O=(0,eP.UK)({new:()=>n.newSession(),newm:()=>w(eE.y$.NewChat),prev:()=>n.nextSession(-1),next:()=>n.nextSession(1),clear:()=>n.updateCurrentSession(e=>{var t;return e.clearContextIndex=null==e?void 0:null===(t=e.messages)||void 0===t?void 0:t.length}),del:()=>n.deleteSession(n.currentSessionIndex)}),H=e=>{var t;d(e);let n=null===(t=e.trim())||void 0===t?void 0:t.length;0===n?E([]):e.startsWith(eP.x6)?E(O.search(e)):!r.disablePromptHint&&n<30&&e.startsWith("/")&&b(null==e?void 0:e.slice(1))},D=e=>{var t;if(""===e.trim())return;let s=O.match(e);if(s.matched){d(""),E([]),s.invoke();return}u(!0),n.onUserInput(e).then(()=>u(!1)),localStorage.setItem(eE.Sb,e),d(""),E([]),k||null===(t=i.current)||void 0===t||t.focus(),g(!0)},A=e=>{eg.L.stop(s._id,e)},I=(e,t)=>{(0,eh.Ri)(e.currentTarget,t.content)&&((null==c?void 0:c.length)===0&&d(t.content),e.preventDefault())},R=e=>{n.updateCurrentSession(t=>t.messages=t.messages.filter(t=>t._id!==e))},F=e=>{R(e)},B=e=>{var t,r,a,l;let o,c;let d=s.messages.findIndex(t=>t._id===e._id);if(d<=0||d>=(null==s?void 0:null===(t=s.messages)||void 0===t?void 0:t.length)){console.error("[Chat] failed to find resending message",e);return}if("assistant"===e.role){c=e;for(let e=d;e>=0;e-=1)if("user"===s.messages[e].role){o=s.messages[e];break}}else if("user"===e.role){o=e;for(let e=d;e<(null==s?void 0:null===(l=s.messages)||void 0===l?void 0:l.length);e+=1)if("assistant"===s.messages[e].role){c=s.messages[e];break}}if(void 0===o){console.error("[Chat] failed to resend",e);return}R(o._id),R(null===(r=c)||void 0===r?void 0:r._id),u(!0),n.onUserInput(o.content).then(()=>u(!1)),null===(a=i.current)||void 0===a||a.focus()},Q=e=>{n.updateCurrentSession(t=>t.mask.context.push(e)),(0,ey.CF)(ex.ZP.Chat.Actions.PinToastContent,{text:ex.ZP.Chat.Actions.PinToastAction,onClick:()=>{eo(!0)}})},V=(0,N.useMemo)(()=>{var e,t;return s.mask.hideContext?[]:null===(e=(null===(t=s.mask)||void 0===t?void 0:t.context)||[])||void 0===e?void 0:e.slice()},[s.mask.context,s.mask.hideContext]),Y=(0,N.useMemo)(()=>(V||[]).concat(s.messages).concat(m?[{...(0,eu.tn)({role:"assistant",content:"……"}),preview:!0}]:[]).concat((null==c?void 0:c.length)>0&&r.sendPreviewBubble?[{...(0,eu.tn)({role:"user",content:c}),preview:!0}]:[]),[r.sendPreviewBubble,V,m,s.messages,c]),[q,ee]=(0,N.useState)(Math.max(0,(null==Y?void 0:Y.length)-eE.nS));function et(e){ee(e=Math.max(0,e=Math.min((null==Y?void 0:Y.length)-eE.nS,e)))}let en=(0,N.useMemo)(()=>{var e;let t=Math.min(q+3*eE.nS,null==Y?void 0:Y.length);return null===(e=Y||[])||void 0===e?void 0:e.slice(q,t)},[q,Y]),es=e=>{let t=e.scrollTop+e.clientHeight,n=e.clientHeight,s=e.scrollTop<=n,r=t>=e.scrollHeight-n,a=t>=e.scrollHeight-10,l=q-eE.nS,o=q+eE.nS;s?et(l):r&&et(o),_(a),g(a)};function er(){et((null==Y?void 0:Y.length)-eE.nS),f()}let ea=(null!==(t=s.clearContextIndex)&&void 0!==t?t:-1)>=0?s.clearContextIndex+(null==V?void 0:V.length)-q:-1,[el,eo]=(0,N.useState)(!1),ei=(0,N.useMemo)(()=>(0,eL.Z)(),[]),ec=!k&&!(null==ei?void 0:ei.isApp);(0,eP.YZ)({fill:d,submit:e=>{D(e)},code:e=>{console.log("[Command] got code from url: ",e),(0,ey.i0)(ex.ZP.URLCommand.Code+"code = ".concat(e)).then(e=>{})},settings:e=>{try{let t=JSON.parse(e);console.log("[Command] got settings from url: ",t),(t.key||t.url)&&(0,ey.i0)(ex.ZP.URLCommand.Settings+"\n".concat(JSON.stringify(t,null,4))).then(e=>{e&&(t.key,t.url)})}catch(t){console.error("[Command] failed to get settings from url: ",e)}}});let[ed,ep]=(0,N.useState)(!1);return(0,M.jsxs)("div",{className:ew().chat,children:[(0,M.jsxs)("div",{className:"window-header","data-tauri-drag-region":!0,children:[k&&(0,M.jsx)("div",{className:"window-actions",children:(0,M.jsx)("div",{className:"window-action-button",children:(0,M.jsx)(e_.h,{icon:(0,M.jsx)(L,{}),bordered:!0,title:ex.ZP.Chat.Actions.ChatList,onClick:()=>w(eE.y$.Home)})})}),(0,M.jsxs)("div",{className:"window-header-title ".concat(ew()["chat-body-title"]),children:[(0,M.jsx)("div",{className:"window-header-main-title ".concat(ew()["chat-body-main-title"]),onClickCapture:()=>ep(!0),children:s.topic?s.topic:eu.HX}),(0,M.jsx)("div",{className:"window-header-sub-title",children:ex.ZP.Chat.SubTitle(null==s?void 0:null===(e=s.messages)||void 0===e?void 0:e.length)})]}),(0,M.jsxs)("div",{className:"window-actions",children:[!k&&(0,M.jsx)("div",{className:"window-action-button",children:(0,M.jsx)(e_.h,{icon:(0,M.jsx)(K,{}),bordered:!0,onClick:()=>ep(!0)})}),(0,M.jsx)("div",{className:"window-action-button",children:(0,M.jsx)(e_.h,{icon:(0,M.jsx)(W,{}),bordered:!0,title:ex.ZP.Chat.Actions.Export,onClick:()=>{o(!0)}})}),ec&&(0,M.jsx)("div",{className:"window-action-button",children:(0,M.jsx)(e_.h,{icon:r.tightBorder?(0,M.jsx)(G.Z,{}):(0,M.jsx)(X.Z,{}),bordered:!0,onClick:()=>{r.update(e=>e.tightBorder=!e.tightBorder)}})})]}),(0,M.jsx)(e$,{showToast:!x,showModal:el,setShowModal:eo})]}),(0,M.jsx)("div",{className:ew()["chat-body"],ref:v,onScroll:e=>es(e.currentTarget),onMouseDown:()=>{var e;return null===(e=i.current)||void 0===e?void 0:e.blur()},onTouchStart:()=>{var e;null===(e=i.current)||void 0===e||e.blur(),g(!1)},children:en.map((e,t)=>{var l,o,i,c;let m="user"===e.role,u=t<(null==V?void 0:V.length),h=t>0&&!(e.preview||(null==e?void 0:null===(l=e.content)||void 0===l?void 0:l.length)===0)&&!u,p=e.preview||e.streaming,g=t===ea-1;return(0,M.jsxs)(N.Fragment,{children:[(0,M.jsx)("div",{className:m?ew()["chat-message-user"]:ew()["chat-message"],children:(0,M.jsxs)("div",{className:ew()["chat-message-container"],children:[(0,M.jsxs)("div",{className:ew()["chat-message-header"],children:[(0,M.jsxs)("div",{className:ew()["chat-message-avatar"],children:[(0,M.jsx)("div",{className:ew()["chat-message-edit"],children:(0,M.jsx)(e_.h,{icon:(0,M.jsx)(K,{}),onClick:async()=>{let t=await (0,ey.G5)(ex.ZP.Chat.Actions.Edit,e.content,10);n.updateCurrentSession(n=>{let s=n.messages.find(t=>t._id===e._id);s&&(s.content=t)})}})}),m?(0,M.jsx)(eb.qE,{avatar:r.avatar}):(0,M.jsx)(eC.MaskAvatar,{mask:s.mask})]}),h&&(0,M.jsx)("div",{className:ew()["chat-message-actions"],children:(0,M.jsx)("div",{className:ew()["chat-input-actions"],children:e.streaming?(0,M.jsx)(e1,{text:ex.ZP.Chat.Actions.Stop,icon:(0,M.jsx)(em,{}),onClick:()=>A(null!==(i=e._id)&&void 0!==i?i:t)}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(e1,{text:ex.ZP.Chat.Actions.Retry,icon:(0,M.jsx)(U.Z,{}),onClick:()=>B(e)}),(0,M.jsx)(e1,{text:ex.ZP.Chat.Actions.Delete,icon:(0,M.jsx)(J.Z,{}),onClick:()=>F(null!==(c=e._id)&&void 0!==c?c:t)}),(0,M.jsx)(e1,{text:ex.ZP.Chat.Actions.Pin,icon:(0,M.jsx)($,{}),onClick:()=>Q(e)}),(0,M.jsx)(e1,{text:ex.ZP.Chat.Actions.Copy,icon:(0,M.jsx)(z.Z,{}),onClick:()=>(0,eh.vQ)(e.content)})]})})})]}),p&&(0,M.jsx)("div",{className:ew()["chat-message-status"],children:ex.ZP.Chat.Typing}),(0,M.jsx)("div",{className:ew()["chat-message-item"],children:(0,M.jsx)(eJ,{content:e.content,loading:(e.preview||e.streaming)&&(null===(o=e.content)||void 0===o?void 0:o.length)===0&&!m,onContextMenu:t=>I(t,e),onDoubleClickCapture:()=>{k&&d(e.content)},fontSize:a,parentRef:v,defaultShow:t>=(null==en?void 0:en.length)-6})}),(0,M.jsx)("div",{className:ew()["chat-message-action-date"]})]})}),g&&(0,M.jsx)(e3,{})]},e._id)})}),(0,M.jsxs)("div",{className:ew()["chat-input-panel"],children:[(0,M.jsx)(e0,{prompts:j,onPromptSelect:e=>{setTimeout(()=>{var t;E([]);let n=O.match(e.content);n.matched?(n.invoke(),d("")):d(e.content),null===(t=i.current)||void 0===t||t.focus()},30)}}),(0,M.jsx)(e6,{showPromptModal:()=>eo(!0),scrollToBottom:er,hitBottom:x,showPromptHints:()=>{var e;if((null==j?void 0:j.length)>0){E([]);return}null===(e=i.current)||void 0===e||e.focus(),d("/"),b("")}}),(0,M.jsxs)("div",{className:ew()["chat-input-panel-inner"],children:[(0,M.jsx)("textarea",{ref:i,className:ew()["chat-input"],placeholder:ex.ZP.Chat.Input(h),onInput:e=>H(e.currentTarget.value),value:c,onKeyDown:e=>{var t;if("ArrowUp"===e.key&&(null==c?void 0:c.length)<=0&&!(e.metaKey||e.altKey||e.ctrlKey)){d(null!==(t=localStorage.getItem(eE.Sb))&&void 0!==t?t:""),e.preventDefault();return}p(e)&&(null==j?void 0:j.length)===0&&(D(c),e.preventDefault())},onFocus:er,onClick:er,rows:C,autoFocus:!k,style:{fontSize:r.fontSize}}),(0,M.jsx)(e_.h,{icon:(0,M.jsx)(T,{}),text:ex.ZP.Chat.Send,className:ew()["chat-input-send"],type:"primary",onClick:()=>D(c)})]})]}),l&&(0,M.jsx)(eF,{onClose:()=>o(!1)}),ed&&(0,M.jsx)(e4,{onClose:()=>{ep(!1)}})]},null==s?void 0:s._id)}function e2(){let e=(0,eu.aK)(),t=e.currentSessionIndex;return(0,M.jsx)(e7,{},t)}},58670:function(e,t,n){"use strict";n.d(t,{f:function(){return d},o:function(){return c}});var s=n(94660),r=n(74810),a=n(68970),l=n(48718),o=n(29380),i=n(28481);let c={ready:!1,builtinEngine:new a.Z([],{keys:["title"]}),userEngine:new a.Z([],{keys:["title"]}),count:{builtin:0},allPrompts:[],builtinPrompts:[],init(e,t){this.ready||(this.allPrompts=t.concat(e),this.builtinPrompts=e.slice(),this.builtinEngine.setCollection(e),this.userEngine.setCollection(t),this.ready=!0)},remove(e){this.userEngine.remove(t=>t.id===e)},add(e){this.userEngine.add(e)},search(e){let t=this.userEngine.search(e),n=this.builtinEngine.search(e);return t.concat(n).map(e=>e.item)}},d=(0,s.Ue)()((0,r.tJ)((e,t)=>({counter:0,latestId:0,prompts:{},add(n){let s=t().prompts;return n.id=(0,i.x0)(),n.isUser=!0,n.createdAt=Date.now(),s[n.id]=n,e(()=>({latestId:n.id,prompts:s})),n.id},get(e){let n=t().prompts[e];return n||c.builtinPrompts.find(t=>t.id===e)},remove(n){let s=t().prompts;delete s[n],c.remove(n),e(()=>({prompts:s,counter:t().counter+1}))},getUserPrompts(){var e;let n=Object.values(null!==(e=t().prompts)&&void 0!==e?e:{});return n.sort((e,t)=>t.id&&e.id?t.createdAt-e.createdAt:0),n},update(n,s){var r;let a=null!==(r=t().prompts[n])&&void 0!==r?r:{title:"",content:"",id:n};c.remove(n),s(a);let l=t().prompts;l[n]=a,e(()=>({prompts:l})),c.add(a)},search:e=>0===e.length?t().getUserPrompts().concat(c.builtinPrompts):c.search(e)}),{name:o.KJ.Prompt,version:3,migrate(e,t){let n=JSON.parse(JSON.stringify(e));return t<3&&Object.values(n.prompts).forEach(e=>e.id=(0,i.x0)()),n},onRehydrateStorage(e){fetch("./prompts.json").then(e=>e.json()).then(e=>{var t;let n=[e.en,e.cn];"cn"===(0,l.VQ)()&&(n=n.reverse());let s=n.map(e=>e.map(e=>{let[t,n]=e;return{id:(0,i.x0)(),title:t,content:n,createdAt:Date.now()}})),r=null!==(t=d.getState().getUserPrompts())&&void 0!==t?t:[],a=s.reduce((e,t)=>e.concat(t),[]).filter(e=>!!e.title&&!!e.content);c.count.builtin=e.en.length+e.cn.length,c.init(a,r)})}}))},51118:function(e){e.exports={"message-exporter-body":"exporter_message-exporter-body__ieezO","export-content":"exporter_export-content__bLZvx",steps:"exporter_steps__6n3hv","steps-progress":"exporter_steps-progress__BaZCB","steps-progress-inner":"exporter_steps-progress-inner__Bx3Y4","steps-inner":"exporter_steps-inner__EVqvK",step:"exporter_step__WhCEO","step-finished":"exporter_step-finished__eBg9d","step-current":"exporter_step-current__oh5Mc","step-index":"exporter_step-index__bWRYR","step-name":"exporter_step-name__aj81m","preview-actions":"exporter_preview-actions__EdSLJ","image-previewer":"exporter_image-previewer__uKfNQ","preview-body":"exporter_preview-body__qK5Zf","chat-info":"exporter_chat-info__N_j5m",icons:"exporter_icons__7WRoV",logo:"exporter_logo__zu13e","main-title":"exporter_main-title__jjxAd","sub-title":"exporter_sub-title__p1RCl","icon-space":"exporter_icon-space__u_tMK","chat-info-item":"exporter_chat-info-item__3D12j",message:"exporter_message__3aahS",avatar:"exporter_avatar__fGOtt",body:"exporter_body__gcKIl","message-assistant":"exporter_message-assistant__sDmHi","message-user":"exporter_message-user__2t254"}},25933:function(e){e.exports={"message-selector":"message-selector_message-selector__dOKbo","message-filter":"message-selector_message-filter__Q5XSd","search-bar":"message-selector_search-bar__4E5gq",actions:"message-selector_actions__MyZCT",messages:"message-selector_messages__GbOLr",message:"message-selector_message___TaV9","message-selected":"message-selector_message-selected__b3mDv",avatar:"message-selector_avatar__HCJ8t",body:"message-selector_body__rKEIZ",date:"message-selector_date__vc48w",content:"message-selector_content__Z9W8L"}}}]);