"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2596],{52596:function(e,s,t){t.r(s),t.d(s,{RegisterForm:function(){return w}});var a=t(57437),r=t(2265),i=t(29380),n=t(45138),l=t(61865),o=t(5954),c=t(24351),d=t(15894),u=t(13621),m=t(51371),p=t(21463),x=t(59100),h=t(26621),g=t(71504);let f={maxWidth:"100%",borderRadius:"4px",textAlign:"left"};function w(e){let{setPageType:s}=e,[t,w]=(0,r.useState)(!1),{register:j,handleSubmit:v,getValues:I,trigger:y,formState:{errors:b}}=(0,l.cI)({mode:"onBlur"}),{toast:z}=(0,c.p)();(0,o.s0)();let{codeSending:S,sendCodeText:k,sendCode:A,codeCountDown:C}=(0,d.A)(),N=(0,r.useCallback)(async()=>{let e=await y("username");e&&A({username:I("username"),type:"register"})},[I,A,y]),Z=(0,r.useCallback)(async e=>{let{username:t,password:a,code:r}=e;w(!0);let l=await (0,n.pi)({username:t,code:r,password:a,inviterId:localStorage.getItem("inviterId")||""});if(200===l.code){z({title:"注册成功",status:"success"}),s(i.DZ.login);return}z({title:l.message||"注册异常",status:"error"}),w(!1)},[]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.xu,{fontWeight:"bold",fontSize:"2xl",textAlign:"center",children:"注册千知GPT账号"}),(0,a.jsxs)("form",{onSubmit:v(Z),children:[(0,a.jsxs)(m.NI,{mt:5,isInvalid:!!b.username,children:[(0,a.jsx)(p.I,{placeholder:"邮箱/手机号",style:f,...j("username",{required:"邮箱/手机号不能为空",pattern:{value:/(^1[3456789]\d{9}$)|(^[A-Za-z0-9]+([_\.][A-Za-z0-9]+)*@([A-Za-z0-9\-]+\.)+[A-Za-z]{2,6}$)/,message:"邮箱/手机号格式错误"}})}),(0,a.jsx)(x.J1,{position:"absolute",fontSize:"xs",children:!!b.username&&b.username.message})]}),(0,a.jsxs)(m.NI,{mt:8,isInvalid:!!b.username,children:[(0,a.jsxs)(h.k,{children:[(0,a.jsx)(p.I,{flex:1,placeholder:"验证码",...j("code",{required:"验证码不能为空"})}),(0,a.jsx)(g.z,{ml:5,w:"145px",maxW:"50%",onClick:N,isDisabled:C>0,isLoading:S,children:k})]}),(0,a.jsx)(x.J1,{position:"absolute",fontSize:"xs",children:!!b.code&&b.code.message})]}),(0,a.jsxs)(m.NI,{mt:8,isInvalid:!!b.password,children:[(0,a.jsx)(p.I,{style:f,type:"password",placeholder:"密码",...j("password",{required:"密码不能为空",minLength:{value:4,message:"密码最少4位最多12位"},maxLength:{value:12,message:"密码最少4位最多12位"}})}),(0,a.jsx)(x.J1,{position:"absolute",fontSize:"xs",children:!!b.password&&b.password.message})]}),(0,a.jsxs)(m.NI,{mt:8,isInvalid:!!b.password2,children:[(0,a.jsx)(p.I,{style:f,type:"password",placeholder:"确认密码",...j("password2",{validate:e=>I("password")===e||"两次密码不一致"})}),(0,a.jsx)(x.J1,{position:"absolute",fontSize:"xs",children:!!b.password2&&b.password2.message})]}),(0,a.jsx)(u.xu,{float:"right",fontSize:"sm",mt:2,color:"myBlue.600",cursor:"pointer",_hover:{textDecoration:"underline"},onClick:()=>s(i.DZ.login),children:"已有账号，去登录"}),(0,a.jsx)(g.z,{type:"submit",mt:5,w:"100%",size:["md","lg"],colorScheme:"blue",isLoading:t,children:"确认注册"})]})]})}},15894:function(e,s,t){let a;t.d(s,{A:function(){return o}});var r=t(2265),i=t(45138),n=t(24351);t(24101);let l=e=>{var s;return"undefined"!=typeof grecaptcha&&(null===(s=grecaptcha)||void 0===s?void 0:s.ready)?new Promise((s,t)=>{grecaptcha.ready(async()=>{try{let t=await grecaptcha.execute(e,{action:"submit"});s(t)}catch(e){t(e)}})}):""},o=()=>{let{toast:e}=(0,n.p)(),[s,t]=(0,r.useState)(!1),[o,c]=(0,r.useState)(0),d=(0,r.useMemo)(()=>o>=10?"".concat(o,"s后重新获取"):o>0?"0".concat(o,"s后重新获取"):"获取验证码",[o]),u=(0,r.useCallback)(async s=>{let{username:r,type:n}=s;t(!0);try{await (0,i.oK)({username:r,type:n,googleToken:await l("123")}),c(60),a=setInterval(()=>{c(e=>(e<=0&&clearInterval(a),e-1))},1e3),e({title:"验证码已发送",status:"success",position:"top"})}catch(s){e({title:s.message||"发送验证码异常",status:"error"})}t(!1)},[e]);return{codeSending:s,sendCode:u,sendCodeText:d,codeCountDown:o}}}}]);