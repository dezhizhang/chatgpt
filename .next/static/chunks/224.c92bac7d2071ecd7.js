"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[224,8340],{90965:function(e,t,n){n.r(t),n.d(t,{ChatItem:function(){return p},ChatList:function(){return j}});var a=n(57437),s=n(15592),c=n(82532),i=n.n(c),l=n(38122),r=n(78566),d=n(48718),o=n(5954),h=n(29380),m=n(28167),u=n(2265),x=n(26537);function p(e){let t=(0,u.useRef)(null);return(0,u.useEffect)(()=>{if(e.selected&&t.current){var n;null===(n=t.current)||void 0===n||n.scrollIntoView({block:"center"})}},[e.selected]),(0,a.jsx)(l._l,{draggableId:"".concat(e.id),index:e.index,children:n=>(0,a.jsxs)("div",{className:"".concat(i()["chat-item"]," ").concat(e.selected&&i()["chat-item-selected"]),onClick:e.onClick,ref:e=>{t.current=e,n.innerRef(e)},...n.draggableProps,...n.dragHandleProps,title:"".concat(e.title,"\n").concat(d.ZP.ChatItem.ChatItemCount(e.count)),children:[e.narrow?(0,a.jsxs)("div",{className:i()["chat-item-narrow"],children:[(0,a.jsx)("div",{className:i()["chat-item-avatar"]+" no-dark",children:(0,a.jsx)(m.MaskAvatar,{mask:e.mask})}),(0,a.jsx)("div",{className:i()["chat-item-narrow-count"],children:e.count})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:i()["chat-item-title"],children:e.title}),(0,a.jsxs)("div",{className:i()["chat-item-info"],children:[(0,a.jsx)("div",{className:i()["chat-item-count"],children:d.ZP.ChatItem.ChatItemCount(e.count)}),(0,a.jsx)("div",{className:i()["chat-item-date"],children:e.time})]})]}),(0,a.jsx)("div",{className:i()["chat-item-delete"],onClickCapture:e.onDelete,children:(0,a.jsx)(s.Z,{})})]})})}function j(e){let[t,n,s,c]=(0,r.aK)(e=>[e.sessions,e.currentSessionIndex,e.selectSession,e.moveSession]),m=(0,r.aK)(),u=(0,o.s0)();return(0,a.jsx)(l.Z5,{onDragEnd:e=>{let{destination:t,source:n}=e;t&&(t.droppableId!==n.droppableId||t.index!==n.index)&&c(n.index,t.index)},children:(0,a.jsx)(l.bK,{droppableId:"chat-list",children:c=>(0,a.jsxs)("div",{className:i()["chat-list"],ref:c.innerRef,...c.droppableProps,children:[t.map((t,c)=>(0,a.jsx)(p,{title:t.topic,time:new Date(t.lastUpdate).toLocaleString(),count:t.messages.length,id:t._id,index:c,selected:c===n,onClick:()=>{u(h.y$.Chat),s(c)},onDelete:async()=>{(!e.narrow||await (0,x.i0)(d.ZP.Home.DeleteChat))&&m.deleteSession(c)},narrow:e.narrow,mask:t.mask},null==t?void 0:t._id)),c.placeholder]})})})}}}]);