(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6190,8340],{43717:function(e,t,a){"use strict";a.d(t,{UK:function(){return c},YZ:function(){return r},x6:function(){return i}});var n=a(2265),s=a(19238),l=a(48718);function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,a]=(0,s.lr)();(0,n.useEffect)(()=>{let n=!1;t.forEach((a,s)=>{"function"==typeof e[s]&&(e[s](a),t.delete(s),n=!0)}),n&&a(t)},[t,e])}let i=":";function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};function t(e){return e.startsWith(i)?e.slice(1):e}return{match:function(a){let n=t(a),s="function"==typeof e[n];return{matched:s,invoke:()=>s&&e[n](a)}},search:function(a){let n=t(a),s=l.ZP.Chat.Commands;return Object.keys(e).filter(e=>e.startsWith(n)).map(e=>({title:s[e],content:i+e}))}}}},33639:function(e,t,a){"use strict";a.r(t),a.d(t,{NewChat:function(){return Z}});var n,s,l,r,i=a(57437),c=a(2265),o=a(29380),h=a(71856),m=a(47004),d=a(29196),f=a.n(d);function u(){return(u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var _=function(e){return c.createElement("svg",u({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),n||(n=c.createElement("defs",null,c.createElement("path",{id:"left_svg__a",d:"M0 0h16v16H0z"}))),c.createElement("g",null,s||(s=c.createElement("mask",{id:"left_svg__b",fill:"#fff"},c.createElement("use",{xlinkHref:"#left_svg__a"}))),c.createElement("g",{mask:"url(#left_svg__b)"},c.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M4 8 0 4l4-4",transform:"translate(6.333 4)"}))))};function k(){return(k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var w=function(e){return c.createElement("svg",k({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),c.createElement("g",null,l||(l=c.createElement("mask",{id:"lightning_svg__b",fill:"#fff"},c.createElement("use",{xlinkHref:"#lightning_svg__a"}))),c.createElement("g",{mask:"url(#lightning_svg__b)"},c.createElement("path",{style:{fill:"#333",opacity:1},d:"M2.248 8.852a.665.665 0 0 1-.172-.828l3.67-7a.664.664 0 0 1 .59-.357h6a.662.662 0 0 1 .634.46.669.669 0 0 1-.11.618l-2.822 3.592h3.629a.661.661 0 0 1 .605.387.663.663 0 0 1-.116.732l-8 8.66a.664.664 0 0 1-.893.078.66.66 0 0 1-.257-.441.66.66 0 0 1 .016-.26L6.472 9H2.666a.657.657 0 0 1-.42-.148zm1.52-1.185h3.569a.665.665 0 0 1 .644.836l-.986 3.74 5.148-5.573H8.667a.665.665 0 0 1-.63-.885.662.662 0 0 1 .105-.194L10.965 2H6.74z"}))),r||(r=c.createElement("defs",null,c.createElement("path",{id:"lightning_svg__a",d:"M0 0h16v16H0z"}))))},v=a(56073),g=a(28586);let p=()=>(0,g.HT)("/model/list");var x=a(5954),j=a(1229),y=a(48718),N=a(78566),E=a(28167),C=a(43717),b=a(26537),M=a(31865);function H(e){return(0,i.jsxs)("div",{className:f().mask,onClick:e.onClick,children:[(0,i.jsx)(E.MaskAvatar,{mask:e.mask}),(0,i.jsx)("div",{className:f()["mask-name"]+" one-line",children:e.mask.name})]})}function Z(){let[e,t]=(0,c.useState)([]),a=(0,N.aK)(),n=(0,j.Zy)(),s=(0,x.s0)(),l=(0,N.MG)(),r=(0,c.useRef)(null),{state:d}=(0,x.TH)(),u=e=>{setTimeout(()=>{a.newSession(e),s(o.y$.Chat)},10)};(0,C.YZ)({mask:e=>{try{var t;let a=null!==(t=n.get(e))&&void 0!==t?t:M.$n.get(e);u(null!=a?a:void 0)}catch(t){console.error("[New Chat] failed to create chat from mask id=",e)}}});let k=async()=>{let e=await p();console.log({res:e});let a=e.myModels||[],n=()=>{let e=document.getElementById(o.ym.AppBody);if(!e||0===a.length)return;let n=e.getBoundingClientRect(),s=n.width,l=.6*n.height,r=()=>a[Math.floor(Math.random()*a.length)],i=0,c=()=>a[i++%a.length],h=Math.ceil(s/120),m=Array(Math.ceil(l/50)).fill(0).map((e,t)=>Array(h).fill(0).map((e,t)=>t<1||t>h-2?r():c()));t(m)};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)};return(0,c.useEffect)(()=>{k()},[]),(0,c.useEffect)(()=>{r.current&&(r.current.scrollLeft=(r.current.scrollWidth-r.current.clientWidth)/2)},[e]),(0,i.jsxs)("div",{className:f()["new-chat"],children:[(0,i.jsxs)("div",{className:f()["mask-header"],children:[(0,i.jsx)(h.h,{icon:(0,i.jsx)(_,{}),text:y.ZP.NewChat.Return,onClick:()=>s(o.y$.Home)}),!(null==d?void 0:d.fromHome)&&(0,i.jsx)(h.h,{text:y.ZP.NewChat.NotShow,onClick:async()=>{await (0,b.i0)(y.ZP.NewChat.ConfirmNoShow)&&(u(),l.update(e=>e.dontShowMaskSplashScreen=!0))}})]}),(0,i.jsxs)("div",{className:f()["mask-cards"],children:[(0,i.jsx)("div",{className:f()["mask-card"],children:(0,i.jsx)(m.eL,{avatar:"1f606",size:24})}),(0,i.jsx)("div",{className:f()["mask-card"],children:(0,i.jsx)(m.eL,{avatar:"1f916",size:24})}),(0,i.jsx)("div",{className:f()["mask-card"],children:(0,i.jsx)(m.eL,{avatar:"1f479",size:24})})]}),(0,i.jsx)("div",{className:f().title,children:y.ZP.NewChat.Title}),(0,i.jsx)("div",{className:f()["sub-title"],children:y.ZP.NewChat.SubTitle}),(0,i.jsxs)("div",{className:f().actions,children:[(0,i.jsx)(h.h,{text:y.ZP.NewChat.More,onClick:()=>s(o.y$.Masks),icon:(0,i.jsx)(v.Z,{}),bordered:!0,shadow:!0}),(0,i.jsx)(h.h,{text:y.ZP.NewChat.Skip,onClick:()=>u(),icon:(0,i.jsx)(w,{}),type:"primary",shadow:!0,className:f().skip})]}),(0,i.jsx)("div",{className:f().masks,ref:r,children:e.map((e,t)=>(0,i.jsx)("div",{className:f()["mask-row"],children:e.map((e,t)=>(0,i.jsx)(H,{mask:e,onClick:()=>u(e)},t))},t))})]})}},29196:function(e){e.exports={"new-chat":"new-chat_new-chat__63RF3","mask-header":"new-chat_mask-header__nBwht","slide-in-from-top":"new-chat_slide-in-from-top__kKaCc","mask-cards":"new-chat_mask-cards__W1FzL","slide-in":"new-chat_slide-in__VIaHY","mask-card":"new-chat_mask-card__EXvr1",title:"new-chat_title__lfHL6","sub-title":"new-chat_sub-title__qYtID",actions:"new-chat_actions__ntcag",skip:"new-chat_skip__js1_N",masks:"new-chat_masks__ArNS9","mask-row":"new-chat_mask-row__ZRTfV",mask:"new-chat_mask__P5aBk","mask-name":"new-chat_mask-name__AytPM"}}}]);